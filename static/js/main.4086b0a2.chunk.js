(this.webpackJsonptacotab=this.webpackJsonptacotab||[]).push([[0],{48:function(e,t,a){e.exports=a.p+"static/media/logo.15863a1a.svg"},50:function(e,t,a){e.exports=a.p+"static/media/icon-github.07883e93.svg"},55:function(e,t,a){e.exports=a(74)},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(24),s=a.n(l),o=(a(60),a(61),a(8)),i=a(9),c=a(12),m=a(10),d=a(11),u=(a(62),a(48)),p=a.n(u),h=a(52),g=a(14),f=a(5),E=a(54),b=a(16),k=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(g.a,null,r.a.createElement(f.a,null,r.a.createElement("h2",null,"Hi David!"),r.a.createElement("p",null,"Yay! You made it work!")))}}]),t}(r.a.Component),v=a(4),S=(a(63),a(50)),y=a.n(S),j=a(7),O=a(17),N=a(51),I=a.n(N),w=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={nameForm:""},a.handleNameFormChange=a.handleNameFormChange.bind(Object(v.a)(a)),a.handleNameFormSubmit=a.handleNameFormSubmit.bind(Object(v.a)(a)),a.importData=a.importData.bind(Object(v.a)(a)),a.exportData=a.exportData.bind(Object(v.a)(a)),a.clearData=a.clearData.bind(Object(v.a)(a)),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){I.a.init()}},{key:"handleNameFormChange",value:function(e){this.setState({nameForm:e.target.value})}},{key:"handleNameFormSubmit",value:function(e){e.preventDefault();var t=this.state.nameForm;localStorage.setItem("tournament_name",JSON.stringify(t)),document.title="".concat(t," - TacoTab"),this.setState({nameForm:""})}},{key:"importData",value:function(e){e.preventDefault();var t=document.getElementById("import").files;if(console.log(t),t.length<=0)return!1;var a=new FileReader;a.onload=function(e){var t=JSON.parse(e.target.result);localStorage.setItem("tournament_name",JSON.stringify(t.tournament_name)),localStorage.setItem("speakers_middle",JSON.stringify(t.speakers_middle)),localStorage.setItem("teams_middle",JSON.stringify(t.teams_middle)),localStorage.setItem("speakers_high",JSON.stringify(t.speakers_high)),localStorage.setItem("teams_high",JSON.stringify(t.teams_high)),localStorage.setItem("speakers_counter",JSON.stringify(t.speakers_counter)),localStorage.setItem("teams_counter",JSON.stringify(t.teams_counter)),localStorage.setItem("judges",JSON.stringify(t.judges)),localStorage.setItem("judges_counter",JSON.stringify(t.judges_counter)),localStorage.setItem("draws_generated",JSON.stringify(t.draws_generated)),localStorage.setItem("draws",JSON.stringify(t.draws))},a.readAsText(t.item(0)),window.location.reload()}},{key:"exportData",value:function(){var e="data:text/json;charset=utf-8,";e+=encodeURIComponent("{"),e+=encodeURIComponent('"tournament_name": '+localStorage.getItem("tournament_name")+","),e+=encodeURIComponent('"speakers_middle": '+localStorage.getItem("speakers_middle")+","),e+=encodeURIComponent('"teams_middle": '+localStorage.getItem("teams_middle")+","),e+=encodeURIComponent('"speakers_high": '+localStorage.getItem("speakers_high")+","),e+=encodeURIComponent('"teams_high": '+localStorage.getItem("teams_high")+","),e+=encodeURIComponent('"speakers_counter": '+localStorage.getItem("speakers_counter")+","),e+=encodeURIComponent('"teams_counter": '+localStorage.getItem("teams_counter")+","),e+=encodeURIComponent('"judges": '+localStorage.getItem("judges")+","),e+=encodeURIComponent('"judges_counter": '+localStorage.getItem("judges_counter")+","),e+=encodeURIComponent('"draws_generated": '+localStorage.getItem("draws_generated")+","),e+=encodeURIComponent('"draws": '+localStorage.getItem("draws")),e+=encodeURIComponent("}");var t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download","tournament.json"),document.body.appendChild(t),t.click(),t.remove()}},{key:"clearData",value:function(){window.confirm("Are you sure you want to delete all data?")&&(localStorage.clear(),window.location.reload())}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(g.a,null,r.a.createElement(f.a,{md:8},r.a.createElement(g.a,null,r.a.createElement(f.a,null,r.a.createElement("h2",null,"Settings"),r.a.createElement("p",null,"Manage your tournament."))),r.a.createElement(g.a,{className:"row-settings"},r.a.createElement(f.a,null,r.a.createElement("h3",null,"Change tournament name"),r.a.createElement(j.a,{onSubmit:this.handleNameFormSubmit,className:"form-settings"},r.a.createElement(j.a.Row,null,r.a.createElement(f.a,{sm:6},r.a.createElement(j.a.Control,{name:"tournament-name",type:"text",placeholder:"New name",value:this.state.nameForm,onChange:this.handleNameFormChange})),r.a.createElement(f.a,null,r.a.createElement(O.a,{variant:"primary",type:"submit"},"Save")))))),r.a.createElement(g.a,{className:"row-settings"},r.a.createElement(f.a,null,r.a.createElement("h3",null,"Import tournament data"),r.a.createElement("p",null,"Open files generated with the Export function below. ",r.a.createElement("strong",null,"Note:")," this will override all current data!"),r.a.createElement(j.a,{onSubmit:this.importData,className:"form-settings"},r.a.createElement(j.a.Row,null,r.a.createElement(f.a,null,r.a.createElement("div",{className:"custom-file"},r.a.createElement(j.a.Control,{name:"import",id:"import",className:"custom-file-input",type:"file"}),r.a.createElement("label",{className:"custom-file-label",htmlFor:"customFile"},"Choose file"))),r.a.createElement(f.a,null,r.a.createElement(O.a,{variant:"primary",type:"submit"},"Import")))))),r.a.createElement(g.a,{className:"row-settings"},r.a.createElement(f.a,null,r.a.createElement("h3",null,"Export tournament data"),r.a.createElement("p",null,"Save all tournament data to a file on your PC."),r.a.createElement(O.a,{variant:"primary",className:"button-settings",onClick:this.exportData},"Export data"))),r.a.createElement(g.a,{className:"row-settings"},r.a.createElement(f.a,null,r.a.createElement("h3",null,"Clear tournament data"),r.a.createElement("p",null,"Warning: this will delete ",r.a.createElement("strong",null,"all")," entered data. Save your data using the Export function first."),r.a.createElement(O.a,{variant:"danger",className:"button-settings",onClick:this.clearData},"Clear data")))),r.a.createElement(f.a,{md:4},r.a.createElement(g.a,null,r.a.createElement(f.a,null,r.a.createElement("h3",null,"About"),r.a.createElement("p",null,"TacoTab \u03b2 version 0.1.0",r.a.createElement("br",null),r.a.createElement("img",{src:y.a,alt:"GitHub logo",id:"logo-github"}),"\xa0",r.a.createElement("a",{href:"https://github.com/rayoverweij/tacotab",rel:"noopener noreferrer",target:"_blank"},"GitHub")),r.a.createElement("p",null,"Built by ",r.a.createElement("a",{href:"https://rayo.dev",rel:"noopener noreferrer",target:"_blank"},"Rayo Verweij")," for the ",r.a.createElement("a",{href:"https://debate.bard.edu",rel:"noopener noreferrer",target:"_blank"},"Bard Debate Union"),"\u2014Bard's best sports team."))))))}}]),t}(r.a.Component),C=a(15),_=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={tournament_name:localStorage.getItem("tournament_name")},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(b.a.Container,{id:"home-view",defaultActiveKey:"welcome"},r.a.createElement(g.a,null,r.a.createElement(f.a,{sm:2},r.a.createElement(C.a,{variant:"pills",className:"flex-column"},r.a.createElement(C.a.Item,null,r.a.createElement(C.a.Link,{eventKey:"welcome",className:"sub-nav-link"},"Welcome")),r.a.createElement(C.a.Item,null,r.a.createElement(C.a.Link,{eventKey:"settings",className:"sub-nav-link"},"Settings")))),r.a.createElement(f.a,{sm:10},r.a.createElement(b.a.Content,null,r.a.createElement(b.a.Pane,{eventKey:"welcome"},r.a.createElement(k,null)),r.a.createElement(b.a.Pane,{eventKey:"settings"},r.a.createElement(w,null))))))}}]),t}(r.a.Component),T=a(32),D=(a(67),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={name:a.props.speaker.name,disqualified:a.props.speaker.disqualified},a.handleNameUpdate=a.handleNameUpdate.bind(Object(v.a)(a)),a.handleDisqUpdate=a.handleDisqUpdate.bind(Object(v.a)(a)),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleNameUpdate",value:function(e){var t=e.target.value,a=this.props.speaker;a.name=t,this.setState({name:t}),this.props.handleSpeakerUpdate(a)}},{key:"handleDisqUpdate",value:function(e){var t=e.target.checked,a=this.props.speaker;a.disqualified=t,this.setState({disqualified:t}),this.props.handleSpeakerUpdate(a)}},{key:"render",value:function(){var e=this,t=this.props.speaker;return r.a.createElement("tr",{key:"speaker-row-".concat(t.debaterID)},r.a.createElement("td",{className:"editable"},r.a.createElement("textarea",{className:"cell-valupdate",rows:"1",autoComplete:"off",value:this.state.name,onChange:this.handleNameUpdate})),r.a.createElement("td",null,t.school),r.a.createElement("td",{className:"cell-low-padding"},r.a.createElement(j.a.Switch,{name:"disqualified",onChange:this.handleDisqUpdate,checked:this.state.disqualified,className:this.state.disqualified?"on":"off"})),r.a.createElement("td",{className:"table-delete"},r.a.createElement("div",{onClick:function(){return e.props.handleSpeakerDelete(t)},className:"icon icon-trash"})))}}]),t}(r.a.Component)),J=function e(t,a,n){Object(o.a)(this,e),this.debaterID=t,this.name=a,this.school=n,this.scores=[0,0,0],this.ranks=[0,0,0],this.wins=0,this.disqualified=!1},F=a(21),R=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={speakerForm:{name:"",school:""}},a.handleSpeakerFormChange=a.handleSpeakerFormChange.bind(Object(v.a)(a)),a.handleSpeakerFormSubmit=a.handleSpeakerFormSubmit.bind(Object(v.a)(a)),a.handleSpeakerUpdate=a.handleSpeakerUpdate.bind(Object(v.a)(a)),a.handleSpeakerDelete=a.handleSpeakerDelete.bind(Object(v.a)(a)),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleSpeakerFormChange",value:function(e){var t=e.target.value,a=e.target.name,n=Object(T.a)({},this.state.speakerForm);n[a]=t,this.setState({speakerForm:n})}},{key:"handleSpeakerFormSubmit",value:function(e){e.preventDefault();var t=this.props.speakers,a=localStorage.getItem("speakers_counter"),n=new J(a++,this.state.speakerForm.name,this.state.speakerForm.school);t.push(n),"middle"===this.props.bracket?localStorage.setItem("speakers_middle",JSON.stringify(t)):localStorage.setItem("speakers_high",JSON.stringify(t)),localStorage.setItem("speakers_counter",a),this.props.updateSpeakers(t);var r=Object(T.a)({},this.state.speakerForm);r.name="",this.setState({speakerForm:r})}},{key:"handleSpeakerUpdate",value:function(e){var t=this.props.speakers,a=t.indexOf(e);t[a]=e,"middle"===this.props.bracket?localStorage.setItem("speakers_middle",JSON.stringify(t)):localStorage.setItem("speakers_high",JSON.stringify(t)),this.props.updateSpeakers(t)}},{key:"handleSpeakerDelete",value:function(e){var t=!0,a=!1,n=void 0;try{for(var r,l=this.props.teams[Symbol.iterator]();!(t=(r=l.next()).done);t=!0){var s=r.value;if(s.round1.includes(e.debaterID.toString())||s.round2.includes(e.debaterID.toString())||s.round3.includes(e.debaterID.toString()))return void window.alert("This speaker is still part of team ".concat(s.teamName,". You need to remove them from the team before you can delete them."))}}catch(c){a=!0,n=c}finally{try{t||null==l.return||l.return()}finally{if(a)throw n}}if(window.confirm("Are you sure you want to delete speaker ".concat(e.name,"?"))){var o=this.props.speakers,i=o.indexOf(e);o.splice(i,1),"middle"===this.props.bracket?localStorage.setItem("speakers_middle",JSON.stringify(o)):localStorage.setItem("speakers_high",JSON.stringify(o)),this.props.updateSpeakers(o)}}},{key:"render",value:function(){var e,t=this;return e=0===this.props.speakers.length?r.a.createElement("p",{className:"none-yet"},"No speakers yet!"):r.a.createElement(F.a,{className:"speaker-table",hover:!0,bordered:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"School"),r.a.createElement("th",null,r.a.createElement("abbr",{title:"Disqualified speakers can still be added to teams and receive scores, but won't be listed in the ranking"},"Disq")),r.a.createElement("th",{className:"table-delete"},r.a.createElement("div",{className:"icon icon-trash-filled"})))),r.a.createElement("tbody",null,this.props.speakers.map((function(e){return r.a.createElement(D,{key:"speaker-row-".concat(e.debaterID),speaker:e,handleSpeakerUpdate:t.handleSpeakerUpdate,handleSpeakerDelete:t.handleSpeakerDelete})})))),r.a.createElement("div",null,r.a.createElement(g.a,null,r.a.createElement(f.a,null,r.a.createElement("h2",null,"Speakers"),r.a.createElement(j.a,{onSubmit:this.handleSpeakerFormSubmit},r.a.createElement(j.a.Row,null,r.a.createElement(f.a,null,r.a.createElement(j.a.Control,{name:"name",type:"text",placeholder:"Name",value:this.state.speakerForm.name,onChange:this.handleSpeakerFormChange})),r.a.createElement(f.a,null,r.a.createElement(j.a.Control,{name:"school",type:"text",placeholder:"School",value:this.state.speakerForm.school,onChange:this.handleSpeakerFormChange})),r.a.createElement(f.a,null,r.a.createElement(O.a,{variant:"primary",type:"submit"},"Add speaker")))))),r.a.createElement(g.a,null,r.a.createElement(f.a,{md:8,className:"table-col"},e)))}}]),t}(r.a.Component),U=(a(68),a(69),a(53)),P=(a(70),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={value:"score"===a.props.type?a.props.speaker.scores[a.props.no]:a.props.speaker.ranks[a.props.no]},a.handleChange=a.handleChange.bind(Object(v.a)(a)),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(e){var t=e.target.value;this.setState({value:t}),t&&!isNaN(t)||(t=0),this.props.fn(this.props.speaker,this.props.no,t)}},{key:"render",value:function(){return r.a.createElement("textarea",{rows:"1",cols:"score"===this.props.type?2:1,maxLength:"score"===this.props.type?2:1,autoComplete:"off",value:this.state.value,onChange:this.handleChange})}}]),t}(r.a.Component)),x=function(e){function t(e){var a,n;return Object(o.a)(this,t),n=1===(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).props.round?"round1":2===a.props.round?"round2":"round3",a.state={value:a.props.team[n][a.props.speaker]},a.handleFormChange=a.handleFormChange.bind(Object(v.a)(a)),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleFormChange",value:function(e){var t=e.target.value;this.setState({value:t}),this.props.handleUpdateTeamFormChange(t,this.props.speaker,this.props.round)}},{key:"render",value:function(){return r.a.createElement(f.a,null,r.a.createElement(j.a.Group,{controlId:"form-update-team-".concat(this.props.team.teamID,"-speaker-").concat(this.props.speaker,"-round-").concat(this.props.round)},r.a.createElement(j.a.Label,null,"Round ",this.props.round),r.a.createElement(j.a.Control,{as:"select",name:"speaker-".concat(this.props.speaker,"-round-").concat(this.props.round),value:this.state.value,onChange:this.handleFormChange},2===this.props.speaker?r.a.createElement("option",{value:"avg"},"[no third speaker]"):"",this.props.speakerPicker)))}}]),t}(r.a.Component),W=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={win:a.props.team.wins[a.props.round-1]},a.handleWinFormUpdate=a.handleWinFormUpdate.bind(Object(v.a)(a)),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleWinFormUpdate",value:function(e){var t=this.props.team;"true"===e.target.value?(t.wins[this.props.round-1]=!0,t.totalWins+=1,this.setState({win:!0})):(t.wins[this.props.round-1]=!1,t.totalWins-=1,this.setState({win:!1})),this.props.updateTeam(t)}},{key:"render",value:function(){return r.a.createElement(j.a,null,r.a.createElement(j.a.Control,{as:"select",name:"win-form-".concat(this.props.team.teamID,"-round-").concat(this.props.round),value:this.state.win,onChange:this.handleWinFormUpdate},r.a.createElement("option",{value:!0},"Win"),r.a.createElement("option",{value:!1},"Loss")))}}]),t}(r.a.Component),A=a(23),K=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={speakers:a.getDistinctSpeakers(),updateTeamForm:[[a.props.team.round1[0],a.props.team.round2[0],a.props.team.round3[0]],[a.props.team.round1[1],a.props.team.round2[1],a.props.team.round3[1]],[a.props.team.round1[2],a.props.team.round2[2],a.props.team.round3[2]]],showModal:!1},a.setScore=a.setScore.bind(Object(v.a)(a)),a.setRank=a.setRank.bind(Object(v.a)(a)),a.modalShow=a.modalShow.bind(Object(v.a)(a)),a.modalHide=a.modalHide.bind(Object(v.a)(a)),a.handleUpdateTeamFormChange=a.handleUpdateTeamFormChange.bind(Object(v.a)(a)),a.handleTeamUpdate=a.handleTeamUpdate.bind(Object(v.a)(a)),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"getDistinctSpeakers",value:function(){for(var e=[],t=0;t<3;t++)e.push(this.props.team.round1[t]),e.push(this.props.team.round2[t]),e.push(this.props.team.round3[t]);return Object(U.a)(new Set(e))}},{key:"modalShow",value:function(){this.setState({showModal:!0})}},{key:"modalHide",value:function(){this.setState({showModal:!1})}},{key:"setScore",value:function(e,t,a){var n=this.props.speakers;n.find((function(t){return t.debaterID.toString()===e.debaterID.toString()})).scores[t]=parseInt(a),"middle"===this.props.bracket?localStorage.setItem("speakers_middle",JSON.stringify(n)):localStorage.setItem("speakers_high",JSON.stringify(n)),this.props.updateSpeakers(n)}},{key:"setRank",value:function(e,t,a){var n=this.props.speakers;n.find((function(t){return t.debaterID.toString()===e.debaterID.toString()})).ranks[t]=parseInt(a),"middle"===this.props.bracket?localStorage.setItem("speakers_middle",JSON.stringify(n)):localStorage.setItem("speakers_high",JSON.stringify(n)),this.props.updateSpeakers(n)}},{key:"handleUpdateTeamFormChange",value:function(e,t,a){var n=this.state.updateTeamForm;n[t][a-1]=e,this.setState({updateTeamForm:n})}},{key:"handleTeamUpdate",value:function(e){e.preventDefault();var t=this.props.team;t.round1=[this.state.updateTeamForm[0][0],this.state.updateTeamForm[1][0],this.state.updateTeamForm[2][0]],t.round2=[this.state.updateTeamForm[0][1],this.state.updateTeamForm[1][1],this.state.updateTeamForm[2][1]],t.round3=[this.state.updateTeamForm[0][2],this.state.updateTeamForm[1][2],this.state.updateTeamForm[2][2]],this.props.updateTeam(t),this.setState({speakers:this.getDistinctSpeakers()}),this.modalHide()}},{key:"render",value:function(){var e=this,t=this.props.team,a=this.state.speakers.map((function(t){return"avg"===t?"avg":e.props.speakers.find((function(e){return e.debaterID.toString()===t}))}));if(a.includes("avg")){var n=a.indexOf("avg");a[n]={debaterID:"avg",name:"[averaged third speaker]",scores:[(a[0].scores[0]+a[1].scores[0])/2,(a[0].scores[1]+a[1].scores[1])/2,(a[0].scores[2]+a[1].scores[2])/2],ranks:[(a[0].ranks[0]+a[1].ranks[0])/2,(a[0].ranks[1]+a[1].ranks[1])/2,(a[0].ranks[2]+a[1].ranks[2])/2]}}var l=a.map((function(a){if("avg"===a.debaterID)return r.a.createElement("tr",{key:"".concat(t.teamID,"-average-third"),className:"invisible-third"});var n=e.props.team.round1.includes(a.debaterID.toString()),l=e.props.team.round2.includes(a.debaterID.toString()),s=e.props.team.round3.includes(a.debaterID.toString()),o=0;n&&(o+=a.scores[0]),l&&(o+=a.scores[1]),s&&(o+=a.scores[2]);var i=0;return n&&(i+=a.ranks[0]),l&&(i+=a.ranks[1]),s&&(i+=a.ranks[2]),r.a.createElement("tr",{key:"".concat(a.name,"_row")},r.a.createElement("td",null,a.name),r.a.createElement("td",{className:n?"editable":"disabled"},r.a.createElement(P,{type:"score",speaker:a,no:0,fn:e.setScore})),r.a.createElement("td",{className:n?"editable":"disabled"},r.a.createElement(P,{type:"rank",speaker:a,no:0,fn:e.setRank})),r.a.createElement("td",{className:l?"editable":"disabled"},r.a.createElement(P,{type:"score",speaker:a,no:1,fn:e.setScore})),r.a.createElement("td",{className:l?"editable":"disabled"},r.a.createElement(P,{type:"rank",speaker:a,no:1,fn:e.setRank})),r.a.createElement("td",{className:s?"editable":"disabled"},r.a.createElement(P,{type:"score",speaker:a,no:2,fn:e.setScore})),r.a.createElement("td",{className:s?"editable":"disabled"},r.a.createElement(P,{type:"rank",speaker:a,no:2,fn:e.setRank})),r.a.createElement("td",null,o),r.a.createElement("td",null,i))})),s=0;a.forEach((function(t){e.props.team.round1.includes(t.debaterID.toString())&&(s+=t.scores[0])}));var o=0;a.forEach((function(t){e.props.team.round2.includes(t.debaterID.toString())&&(o+=t.scores[1])}));var i=0;a.forEach((function(t){e.props.team.round3.includes(t.debaterID.toString())&&(i+=t.scores[2])}));var c=0;a.forEach((function(t){e.props.team.round1.includes(t.debaterID.toString())&&(c+=t.ranks[0])}));var m=0;a.forEach((function(t){e.props.team.round2.includes(t.debaterID.toString())&&(m+=t.ranks[1])}));var d=0;a.forEach((function(t){e.props.team.round3.includes(t.debaterID.toString())&&(d+=t.ranks[2])})),t.totalPoints=s+o+i;var u=this.props.teams,p=u.indexOf((function(e){return e.teamID===t.teamID}));u[p]=t,"middle"===this.props.bracket?localStorage.setItem("teams_middle",JSON.stringify(u)):localStorage.setItem("teams_high",JSON.stringify(u));var h=[0,1,2].map((function(a){return r.a.createElement("div",{key:"teamSpeakerSelectRow-team-".concat(t.teamID,"-speaker-").concat(a),className:"form-update-team-speaker"},r.a.createElement("p",null,"Speaker ",a+1),r.a.createElement(j.a.Row,null,[1,2,3].map((function(n){return r.a.createElement(x,{key:"teamSpeakerSelect-team-".concat(t.teamID,"-speaker-").concat(a,"-round-").concat(n),team:t,speaker:a,round:n,value:e.state.updateTeamForm,handleUpdateTeamFormChange:e.handleUpdateTeamFormChange,speakerPicker:e.props.speakerPicker})}))))}));return r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{rowSpan:this.state.speakers.length+3,className:"cell-teamname"},t.teamName,r.a.createElement("br",null),r.a.createElement("div",{className:"icon-people",onClick:this.modalShow}),r.a.createElement("div",{className:"icon-trash",onClick:function(){return e.props.deleteTeam(t)}}))),l,r.a.createElement("tr",{className:"row-total"},r.a.createElement("td",null,"Team total"),r.a.createElement("td",null,s),r.a.createElement("td",null,c),r.a.createElement("td",null,o),r.a.createElement("td",null,m),r.a.createElement("td",null,i),r.a.createElement("td",null,d),r.a.createElement("td",null,s+o+i),r.a.createElement("td",null,c+m+d)),r.a.createElement("tr",{className:"row-wins"},r.a.createElement("td",null,"Team wins"),r.a.createElement("td",{colSpan:"2"},r.a.createElement(W,{team:this.props.team,round:"1",updateTeam:this.props.updateTeam})),r.a.createElement("td",{colSpan:"2"},r.a.createElement(W,{team:this.props.team,round:"2",updateTeam:this.props.updateTeam})),r.a.createElement("td",{colSpan:"2"},r.a.createElement(W,{team:this.props.team,round:"3",updateTeam:this.props.updateTeam})),r.a.createElement("td",{colSpan:"2",className:"cell-totalwins"},"Total wins: ",t.totalWins)),r.a.createElement(A.a,{show:this.state.showModal,size:"lg",onHide:this.modalHide},r.a.createElement(A.a.Header,{closeButton:!0},r.a.createElement(A.a.Title,null,"Specify team members per round")),r.a.createElement(A.a.Body,null,r.a.createElement(j.a,{onSubmit:this.handleTeamUpdate},h,r.a.createElement(O.a,{variant:"primary",type:"submit",className:"form-button"},"Save")))))}}]),t}(r.a.Component),M=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(F.a,{hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Team Name"),r.a.createElement("th",null,"Speakers"),r.a.createElement("th",null,"R1 Score"),r.a.createElement("th",null,"R1 Rank"),r.a.createElement("th",null,"R2 Score"),r.a.createElement("th",null,"R2 Rank"),r.a.createElement("th",null,"R3 Score"),r.a.createElement("th",null,"R3 Rank"),r.a.createElement("th",null,"Total Score"),r.a.createElement("th",null,"Total Rank"))),this.props.teams.map((function(t){return r.a.createElement(K,{key:"".concat(t.teamName,"-row"),team:t,teams:e.props.teams,speakers:e.props.speakers,bracket:e.props.bracket,updateSpeakers:e.props.updateSpeakers,updateTeam:e.props.updateTeam,deleteTeam:e.props.deleteTeam,speakerPicker:e.props.speakerPicker})})))}}]),t}(r.a.Component),H=function e(t,a,n,r,l){Object(o.a)(this,e),this.teamID=t,this.teamName=a,this.round1=[n,r,l],this.round2=[n,r,l],this.round3=[n,r,l],this.totalPoints=0,this.wins=[!1,!1,!1],this.totalWins=0,this.sideR1=""},L=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={addTeamForm:{teamName:"",speaker1:"",speaker2:"",speaker3:""},showModal:!1},a.modalShow=a.modalShow.bind(Object(v.a)(a)),a.modalHide=a.modalHide.bind(Object(v.a)(a)),a.handleAddTeamFormChange=a.handleAddTeamFormChange.bind(Object(v.a)(a)),a.handleAddTeamFormSubmit=a.handleAddTeamFormSubmit.bind(Object(v.a)(a)),a.updateTeam=a.updateTeam.bind(Object(v.a)(a)),a.deleteTeam=a.deleteTeam.bind(Object(v.a)(a)),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"modalShow",value:function(){this.setState({showModal:!0})}},{key:"modalHide",value:function(){this.setState({showModal:!1})}},{key:"handleAddTeamFormChange",value:function(e){var t=e.target.value,a=e.target.name,n=Object(T.a)({},this.state.addTeamForm);n[a]=t,this.setState({addTeamForm:n})}},{key:"handleAddTeamFormSubmit",value:function(e){e.preventDefault();var t=this.props.teams,a=localStorage.getItem("teams_counter"),n=new H(a++,this.state.addTeamForm.teamName,this.state.addTeamForm.speaker1,this.state.addTeamForm.speaker2,this.state.addTeamForm.speaker3);t.push(n),"middle"===this.props.bracket?localStorage.setItem("teams_middle",JSON.stringify(t)):localStorage.setItem("teams_high",JSON.stringify(t)),localStorage.setItem("teams_counter",a),this.props.updateTeams(t),this.modalHide()}},{key:"updateTeam",value:function(e){var t=this.props.teams,a=t.indexOf((function(t){return t.teamID===e.teamID}));t[a]=e,"middle"===this.props.bracket?localStorage.setItem("teams_middle",JSON.stringify(t)):localStorage.setItem("teams_high",JSON.stringify(t)),this.props.updateTeams(t)}},{key:"deleteTeam",value:function(e){var t=JSON.parse(localStorage.getItem("draws"));for(var a in t){var n=void 0;n="middle"===this.props.bracket?t[a].pairings_middle:t[a].pairings_high;var r=!0,l=!1,s=void 0;try{for(var o,i=n[Symbol.iterator]();!(r=(o=i.next()).done);r=!0){var c=o.value;if(c.prop===e.teamID||c.opp===e.teamID)return void alert("This team has already started the tournament. You can't delete it anymore. You can still replace its speakers.")}}catch(d){l=!0,s=d}finally{try{r||null==i.return||i.return()}finally{if(l)throw s}}}if(window.confirm("Are you sure you want to delete team ".concat(e.teamName,"?"))){var m=this.props.teams;m=m.filter((function(t){return t.teamID!==e.teamID})),"middle"===this.props.bracket?localStorage.setItem("teams_middle",JSON.stringify(m)):localStorage.setItem("teams_high",JSON.stringify(m)),this.props.updateTeams(m)}}},{key:"render",value:function(){var e,t=this.props.speakers.map((function(e){return r.a.createElement("option",{value:e.debaterID,key:"option-".concat(e.debaterID)},e.name)}));return e=0===this.props.teams.length?r.a.createElement("p",{className:"none-yet"},"No teams yet!"):r.a.createElement(M,{speakers:this.props.speakers,teams:this.props.teams,bracket:this.props.bracket,updateSpeakers:this.props.updateSpeakers,updateTeam:this.updateTeam,deleteTeam:this.deleteTeam,speakerPicker:t}),r.a.createElement("div",null,r.a.createElement(g.a,null,r.a.createElement(f.a,null,r.a.createElement("h2",null,"Teams"),r.a.createElement(O.a,{onClick:this.modalShow},"Add team"))),r.a.createElement(g.a,null,r.a.createElement(f.a,null,e)),r.a.createElement(A.a,{show:this.state.showModal,onHide:this.modalHide},r.a.createElement(A.a.Header,{closeButton:!0},r.a.createElement(A.a.Title,null,"Add a team")),r.a.createElement(A.a.Body,null,r.a.createElement(j.a,{onSubmit:this.handleAddTeamFormSubmit},r.a.createElement(j.a.Group,{controlId:"form-add-team-".concat(this.props.bracket,"-name")},r.a.createElement(j.a.Label,null,"Team name"),r.a.createElement(j.a.Control,{type:"text",name:"teamName",value:this.state.addTeamForm.teamName,onChange:this.handleAddTeamFormChange})),r.a.createElement(j.a.Group,{controlId:"form-add-team-".concat(this.props.bracket,"-speaker-1")},r.a.createElement(j.a.Label,null,"Speaker 1"),r.a.createElement(j.a.Control,{as:"select",name:"speaker1",value:this.state.addTeamForm.speaker1,onChange:this.handleAddTeamFormChange},r.a.createElement("option",null,"-- pick a speaker --"),t)),r.a.createElement(j.a.Group,{controlId:"form-add-team-".concat(this.props.bracket,"-speaker-2")},r.a.createElement(j.a.Label,null,"Speaker 2"),r.a.createElement(j.a.Control,{as:"select",name:"speaker2",value:this.state.addTeamForm.speaker2,onChange:this.handleAddTeamFormChange},r.a.createElement("option",null,"-- pick a speaker --"),t)),r.a.createElement(j.a.Group,{controlId:"form-add-team-".concat(this.props.bracket,"-speaker-3")},r.a.createElement(j.a.Label,null,"Speaker 3"),r.a.createElement(j.a.Control,{as:"select",name:"speaker3",value:this.state.addTeamForm.speaker3,onChange:this.handleAddTeamFormChange},r.a.createElement("option",null,"-- pick a speaker --"),r.a.createElement("option",{value:"avg"},"[no third speaker]"),t)),r.a.createElement(O.a,{variant:"primary",type:"submit",className:"form-button"},"Add")))))}}]),t}(r.a.Component),q=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.speakers,t=this.props.teams,a=e.slice(0).filter((function(e){return!1===e.disqualified})).sort((function(e,a){var n=e.scores.reduce((function(e,t){return e+t}),0),r=a.scores.reduce((function(e,t){return e+t}),0);if(n>r)return-1;if(n<r)return 1;var l=e.ranks.reduce((function(e,t){return e+t}),0),s=a.ranks.reduce((function(e,t){return e+t}),0);if(l<s)return-1;if(l>s)return 1;var o=t.find((function(t){return t.round1.includes(e.debaterID.toString())})),i=t.find((function(e){return e.round1.includes(a.debaterID.toString())})),c=void 0===o?0:o.totalWins,m=void 0===i?0:i.totalWins;if(c>m)return-1;if(c<m)return 1;var d=void 0===o?0:o.totalPoints,u=void 0===i?0:i.totalPoints;return d>u?-1:1})).map((function(e,a){var n=t.find((function(t){return t.round1.includes(e.debaterID.toString())}));return void 0===n&&((n={}).totalWins=0,n.totalPoints=0),r.a.createElement("tr",{key:"speaker_rank_".concat(a+1)},r.a.createElement("td",null,a+1),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.scores.reduce((function(e,t){return e+t}),0)),r.a.createElement("td",null,e.ranks.reduce((function(e,t){return e+t}),0)),r.a.createElement("td",null,n.totalWins),r.a.createElement("td",null,n.totalPoints))})).splice(0,20),n=t.slice(0).sort((function(e,t){var a=e.totalWins,n=t.totalWins;if(a>n)return-1;if(a<n)return 1;var r=e.totalPoints,l=t.totalPoints;return r>l?-1:1})).map((function(e,t){return r.a.createElement("tr",{key:"team_rank_".concat(t+1)},r.a.createElement("td",null,t+1),r.a.createElement("td",null,e.teamName),r.a.createElement("td",null,e.totalWins),r.a.createElement("td",null,e.totalPoints))}));return r.a.createElement("div",null,r.a.createElement(g.a,null,r.a.createElement(f.a,null,r.a.createElement("h2",null,"Ranking"))),r.a.createElement(g.a,null,r.a.createElement(f.a,{md:6,className:"table-col"},r.a.createElement("h4",null,"Speakers"),r.a.createElement(F.a,{hover:!0,className:"speaker-ranking-table table-no-top-margin"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,r.a.createElement("abbr",{title:"Total speaker points"},"\u03a3SP")),r.a.createElement("th",null,r.a.createElement("abbr",{title:"Total speaker ranks (lower is better)"},"\u03a3SR")),r.a.createElement("th",null,r.a.createElement("abbr",{title:"Total team wins"},"\u03a3TW")),r.a.createElement("th",null,r.a.createElement("abbr",{title:"Total team points"},"\u03a3TP")))),r.a.createElement("tbody",null,a))),r.a.createElement(f.a,{md:6},r.a.createElement("h4",null,"Teams"),r.a.createElement(F.a,{hover:!0,className:"table-no-top-margin"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,r.a.createElement("abbr",{title:"Total team wins"},"\u03a3TW")),r.a.createElement("th",null,r.a.createElement("abbr",{title:"Total team points"},"\u03a3TP")))),r.a.createElement("tbody",null,n)))))}}]),t}(r.a.Component),B=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={teams:"middle"===a.props.bracket?JSON.parse(localStorage.getItem("teams_middle")):JSON.parse(localStorage.getItem("teams_high")),speakers:"middle"===a.props.bracket?JSON.parse(localStorage.getItem("speakers_middle")):JSON.parse(localStorage.getItem("speakers_high"))},a.updateSpeakers=a.updateSpeakers.bind(Object(v.a)(a)),a.updateTeams=a.updateTeams.bind(Object(v.a)(a)),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"updateSpeakers",value:function(e){this.setState({speakers:e})}},{key:"updateTeams",value:function(e){this.setState({teams:e})}},{key:"render",value:function(){return r.a.createElement(b.a.Container,{id:"part-view-".concat(this.props.bracket),defaultActiveKey:"speakers"},r.a.createElement(g.a,{className:"part-view"},r.a.createElement(f.a,{sm:2},r.a.createElement(C.a,{variant:"pills",className:"flex-column"},r.a.createElement(C.a.Item,null,r.a.createElement(C.a.Link,{eventKey:"speakers",className:"sub-nav-link"},"Speakers")),r.a.createElement(C.a.Item,null,r.a.createElement(C.a.Link,{eventKey:"teams",className:"sub-nav-link"},"Teams")),r.a.createElement(C.a.Item,null,r.a.createElement(C.a.Link,{eventKey:"ranking",className:"sub-nav-link"},"Ranking")))),r.a.createElement(f.a,{sm:10},r.a.createElement(b.a.Content,null,r.a.createElement(b.a.Pane,{eventKey:"speakers"},r.a.createElement(R,{speakers:this.state.speakers,teams:this.state.teams,bracket:this.props.bracket,updateSpeakers:this.updateSpeakers,updateTeams:this.updateTeams})),r.a.createElement(b.a.Pane,{eventKey:"teams"},r.a.createElement(L,{speakers:this.state.speakers,teams:this.state.teams,bracket:this.props.bracket,updateSpeakers:this.updateSpeakers,updateTeams:this.updateTeams})),r.a.createElement(b.a.Pane,{eventKey:"ranking"},r.a.createElement(q,{speakers:this.state.speakers,teams:this.state.teams}))))))}}]),t}(r.a.Component),Y=(a(71),a(40)),G=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={canChair:a.props.judge.canChair,r1:a.props.judge.r1,r2:a.props.judge.r2,r3:a.props.judge.r3},a.handleJudgeUpdate=a.handleJudgeUpdate.bind(Object(v.a)(a)),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleJudgeUpdate",value:function(e){var t=e.target.name,a=e.target.checked,n=this.props.judge;n[t]=a,this.setState(Object(Y.a)({},t,a)),this.props.updateJudge(n)}},{key:"render",value:function(){var e=this;return r.a.createElement("tr",null,r.a.createElement("td",{className:"judge-table-name"},this.props.judge.name),r.a.createElement("td",{className:"cell-low-padding"},r.a.createElement(j.a.Switch,{name:"canChair",onChange:this.handleJudgeUpdate,checked:this.state.canChair,className:this.state.canChair?"on":"off"})),r.a.createElement("td",{className:"cell-low-padding"},r.a.createElement(j.a.Switch,{name:"r1",onChange:this.handleJudgeUpdate,checked:this.state.r1,className:this.state.r1?"on":"off"})),r.a.createElement("td",{className:"cell-low-padding"},r.a.createElement(j.a.Switch,{name:"r2",onChange:this.handleJudgeUpdate,checked:this.state.r2,className:this.state.r2?"on":"off"})),r.a.createElement("td",{className:"cell-low-padding"},r.a.createElement(j.a.Switch,{name:"r3",onChange:this.handleJudgeUpdate,checked:this.state.r3,className:this.state.r3?"on":"off"})),r.a.createElement("td",{className:"table-delete cell-low-padding"},r.a.createElement("div",{onClick:function(){return e.props.deleteJudge(e.props.judge)},className:"icon icon-trash"})))}}]),t}(r.a.Component),z=function e(t,a){Object(o.a)(this,e),this.judgeID=t,this.name=a,this.canChair=!1,this.r1=!0,this.r2=!0,this.r3=!0,this.hasChaired=[]},V=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={judges:JSON.parse(localStorage.getItem("judges")),addJudgeForm:""},a.handleJudgeFormChange=a.handleJudgeFormChange.bind(Object(v.a)(a)),a.handleJudgeFormSubmit=a.handleJudgeFormSubmit.bind(Object(v.a)(a)),a.handleJudgeUpdate=a.handleJudgeUpdate.bind(Object(v.a)(a)),a.handleJudgeDelete=a.handleJudgeDelete.bind(Object(v.a)(a)),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleJudgeFormChange",value:function(e){this.setState({addJudgeForm:e.target.value})}},{key:"handleJudgeFormSubmit",value:function(e){e.preventDefault();var t=this.state.judges,a=localStorage.getItem("judges_counter");t.push(new z(a++,this.state.addJudgeForm)),this.setState({judges:t}),localStorage.setItem("judges",JSON.stringify(t)),localStorage.setItem("judges_counter",a),this.setState({addJudgeForm:""})}},{key:"handleJudgeUpdate",value:function(e){var t=this.state.judges,a=t.indexOf(e);t[a]=e,localStorage.setItem("judges",JSON.stringify(t)),this.setState({judges:t})}},{key:"handleJudgeDelete",value:function(e){var t=JSON.parse(localStorage.getItem("draws")),a=!0,n=!1,r=void 0;try{for(var l,s=t[Symbol.iterator]();!(a=(l=s.next()).done);a=!0)for(var o=l.value,i=0,c=Object.keys(o);i<c.length;i++){var m=c[i],d=!0,u=!1,p=void 0;try{for(var h,g=o[m][Symbol.iterator]();!(d=(h=g.next()).done);d=!0){var f=h.value;if(f.chair===e.judgeID||f.wings.includes(e.judgeID))return void alert("This judge has already taken part in a round. You can't delete them anymore. You can still change their availability for each round.")}}catch(k){u=!0,p=k}finally{try{d||null==g.return||g.return()}finally{if(u)throw p}}}}catch(k){n=!0,r=k}finally{try{a||null==s.return||s.return()}finally{if(n)throw r}}if(window.confirm("Are you sure you want to delete judge ".concat(e.name,"?"))){var E=this.state.judges,b=E.indexOf(e);E.splice(b,1),localStorage.setItem("judges",JSON.stringify(E)),this.setState({judges:E})}}},{key:"render",value:function(){var e,t=this;return e=0===this.state.judges.length?r.a.createElement("p",{className:"none-yet"},"No judges yet!"):r.a.createElement(F.a,{className:"judge-table",hover:!0,bordered:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"judge-table-name"},"Name"),r.a.createElement("th",null,"Chair?"),r.a.createElement("th",null,"Round 1?"),r.a.createElement("th",null,"Round 2?"),r.a.createElement("th",null,"Round 3?"),r.a.createElement("th",{className:"table-delete"},r.a.createElement("div",{className:"icon icon-trash-filled"})))),r.a.createElement("tbody",null,this.state.judges.map((function(e){return r.a.createElement(G,{key:"judge-row-".concat(e.name),judge:e,updateJudge:t.handleJudgeUpdate,deleteJudge:t.handleJudgeDelete})})))),r.a.createElement(b.a.Container,{id:"judges-view",defaultActiveKey:"judges"},r.a.createElement(g.a,null,r.a.createElement(f.a,{sm:2},r.a.createElement(C.a,{variant:"pills",className:"flex-column"},r.a.createElement(C.a.Item,null,r.a.createElement(C.a.Link,{eventKey:"judges",className:"sub-nav-link"},"Judges")))),r.a.createElement(f.a,{sm:10},r.a.createElement(b.a.Content,null,r.a.createElement(b.a.Pane,{eventKey:"judges"},r.a.createElement(g.a,null,r.a.createElement(f.a,null,r.a.createElement("h2",null,"Judges"),r.a.createElement(j.a,{onSubmit:this.handleJudgeFormSubmit},r.a.createElement(j.a.Row,null,r.a.createElement(f.a,{md:4},r.a.createElement(j.a.Control,{name:"judgeName",type:"text",placeholder:"Name",value:this.state.addJudgeForm,onChange:this.handleJudgeFormChange})),r.a.createElement(f.a,null,r.a.createElement(O.a,{variant:"primary",type:"submit"},"Add judge")))),r.a.createElement("div",{id:"total-judges"},r.a.createElement("p",null,"Total judges each round: ",this.state.judges.filter((function(e){return e.r1})).length," \xb7 ",this.state.judges.filter((function(e){return e.r2})).length," \xb7 ",this.state.judges.filter((function(e){return e.r3})).length,r.a.createElement("br",null),"Total chairs each round: ",this.state.judges.filter((function(e){return e.canChair&&e.r1})).length," \xb7 ",this.state.judges.filter((function(e){return e.canChair&&e.r2})).length," \xb7 ",this.state.judges.filter((function(e){return e.canChair&&e.r3})).length)))),r.a.createElement(g.a,null,r.a.createElement(f.a,{md:8,className:"table-col"},e)))))))}}]),t}(r.a.Component),$=(a(72),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={room:a.props.pair.room},a.handleRoomChange=a.handleRoomChange.bind(Object(v.a)(a)),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleRoomChange",value:function(e){var t=e.target.value,a=this.props.pair;this.setState({room:t}),a.room=t,this.props.updatePairings(a,this.props.bracket,this.props.round)}},{key:"render",value:function(){var e="middle"===this.props.bracket?JSON.parse(localStorage.getItem("teams_middle")):JSON.parse(localStorage.getItem("teams_high")),t=JSON.parse(localStorage.getItem("judges")),a=this.props.pair;return r.a.createElement("tr",null,r.a.createElement("td",{className:"editable"},r.a.createElement("textarea",{className:"cell-valupdate",rows:"1",cols:"12",autoComplete:"off",value:this.state.room,onChange:this.handleRoomChange})),r.a.createElement("td",{className:"draw-table-team-cell"},e.find((function(e){return e.teamID===a.prop})).teamName),r.a.createElement("td",{className:"draw-table-team-cell"},e.find((function(e){return e.teamID===a.opp})).teamName),r.a.createElement("td",null,t.find((function(e){return e.judgeID===a.chair})).name,"\xa9",a.wings.map((function(e){return", "+t.find((function(t){return t.judgeID===e})).name}))))}}]),t}(r.a.Component)),Q=function(e){function t(e){var a;Object(o.a)(this,t),a=Object(c.a)(this,Object(m.a)(t).call(this,e));var n=JSON.parse(localStorage.getItem("draws"))[a.props.r-1];return a.state={generated:JSON.parse(localStorage.getItem("draws_generated"))[a.props.r-1],pairings_middle:n.pairings_middle,pairings_high:n.pairings_high},a.generateDraw=a.generateDraw.bind(Object(v.a)(a)),a.updatePairings=a.updatePairings.bind(Object(v.a)(a)),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"generateDraw",value:function(){var e=this;if(this.state.generated&&!window.confirm("Do you really want to regenerate the draw?"))return;var t=JSON.parse(localStorage.getItem("draws_generated")),a=JSON.parse(localStorage.getItem("draws")),n=JSON.parse(localStorage.getItem("teams_middle")),r=JSON.parse(localStorage.getItem("teams_high")),l=JSON.parse(localStorage.getItem("judges")),s=n.length,o=r.length,i=(l="1"===this.props.r?l.filter((function(e){return!0===e.r1})):"2"===this.props.r?l.filter((function(e){return!0===e.r2})):l.filter((function(e){return!0===e.r3}))).filter((function(e){return!0===e.canChair})).map((function(e){return e.judgeID})),c=l.filter((function(e){return!1===e.canChair})).map((function(e){return e.judgeID}));if(s%2!==0&&o%2!==0)return window.confirm("Both brackets have an odd number of teams. This means that one middle school team would debate one high school team. Do you want to continue under these circumstances?")?void alert("This scenario hasn't been implemented yet, sorry."):void 0;if(s%2===0)if(o%2===0){if("2"===this.props.r){if(!0!==t[0])return void alert("You can't generate the draw for round 2 before generating the draw for round 1.")}else if("3"===this.props.r&&(!0!==t[0]||!0!==t[1]))return void alert("You can't generate the draw for round 3 before generating the draw for rounds 1 and 2.");var m=s+o;if(i.length<m/2)alert("There are not enough chairs to adjudicate every room. Please add some more.");else{for(var d=i.length-1;d>0;d--){var u=Math.floor(Math.random()*(d+1)),p=[i[u],i[d]];i[d]=p[0],i[u]=p[1]}for(;i.length>m/2;)c.push(i.pop());var h,g,f,E=[],b=[],k=[],v=[];if("1"===this.props.r){k=n.slice(0);for(var S=s-1;S>0;S--){var y=Math.floor(Math.random()*(S+1)),j=[k[y],k[S]];k[S]=j[0],k[y]=j[1]}v=r.slice(0);for(var O=o-1;O>0;O--){var N=Math.floor(Math.random()*(O+1)),I=[v[N],v[O]];v[O]=I[0],v[N]=I[1]}}else k=n.slice(0).sort((function(e,t){return e.totalWins<t.totalWins?1:e.totalWins>t.totalWins?-1:e.totalPoints<t.totalPoints?1:e.totalPoints>t.totalPoints?-1:1})),v=r.slice(0).sort((function(e,t){return e.totalWins<t.totalWins?1:e.totalWins>t.totalWins?-1:e.totalPoints<t.totalPoints?1:e.totalPoints>t.totalPoints?-1:1}));"2"===this.props.r&&(k.forEach((function(e,t){if(t%2===0&&"prop"===e.sideR1){for(var a=t+1;a<s;a++)if("opp"===k[a].sideR1){var n=[k[a],k[t]];k[t]=n[0],k[a]=n[1];break}}else if(t%2===1&&"opp"===e.sideR1)for(var r=t+1;r<s;r++)if("prop"===k[r].sideR1){var l=[k[r],k[t]];k[t]=l[0],k[r]=l[1];break}})),v.forEach((function(e,t){if(t%2===0&&"prop"===e.sideR1){for(var a=t+1;a<o;a++)if("opp"===v[a].sideR1){var n=[v[a],v[t]];v[t]=n[0],v[a]=n[1];break}}else if(t%2===1&&"opp"===e.sideR1)for(var r=t+1;r<o;r++)if("prop"===v[r].sideR1){var l=[v[r],v[t]];v[t]=l[0],v[r]=l[1];break}})));for(var w=function(t){"1"===e.props.r&&(k[t].sideR1="prop",k[t+1].sideR1="opp"),h=k[t].teamID,g=k[t+1].teamID;var a=i.pop();E[t/2]={prop:h,opp:g,chair:a,wings:[],room:"[room]"},f=l.findIndex((function(e){return e.judgeID.toString()===a.toString()})),l[f].hasChaired.push(h,g)},C=0;C<s;C+=2)w(C);for(var _=function(t){"1"===e.props.r&&(v[t].sideR1="prop",v[t+1].sideR1="opp"),h=v[t].teamID,g=v[t+1].teamID;var a=i.pop();b[t/2]={prop:h,opp:g,chair:a,wings:[],room:"[room]"},f=l.findIndex((function(e){return e.judgeID.toString()===a.toString()})),l[f].hasChaired.push(h,g)},T=0;T<o;T+=2)_(T);for(;c.length>0;){for(var D=0;D<E.length&&(E[D].wings.push(c.pop()),0!==c.length);D++);if(0===c.length)break;for(var J=0;J<b.length&&(b[J].wings.push(c.pop()),0!==c.length);J++);}for(var F=E.length-1;F>0;F--){var R=Math.floor(Math.random()*(F+1)),U=[E[R],E[F]];E[F]=U[0],E[R]=U[1]}for(var P=b.length-1;P>0;P--){var x=Math.floor(Math.random()*(P+1)),W=[b[x],b[P]];b[P]=W[0],b[x]=W[1]}var A={pairings_middle:E,pairings_high:b};"1"===this.props.r?a[0]=A:"2"===this.props.r?a[1]=A:a[2]=A,localStorage.setItem("draws",JSON.stringify(a)),k.forEach((function(e){var t=n.indexOf(e);n[t]=e})),localStorage.setItem("teams_middle",JSON.stringify(n)),v.forEach((function(e){var t=r.indexOf(e);r[t]=e})),localStorage.setItem("teams_high",JSON.stringify(r)),i.forEach((function(e){var t=l.indexOf(e);l[t]=e})),localStorage.setItem("judges",JSON.stringify(l)),this.setState({pairings_middle:E}),this.setState({pairings_high:b}),t[this.props.r-1]=!0,localStorage.setItem("draws_generated",JSON.stringify(t)),this.setState({generated:!0})}}else alert("There is an odd number of high school teams\u2014add or remove a team to generate the draw.");else alert("There is an odd number of middle school teams\u2014add or remove a team to generate the draw.")}},{key:"updatePairings",value:function(e,t,a){var n,r=JSON.parse(localStorage.getItem("draws")),l=(n="middle"===t?this.state.pairings_middle:this.state.pairings_high).indexOf(e);n[l]=e,"middle"===t?(this.setState({pairings_middle:n}),r[this.props.r-1].pairings_middle=n):(this.setState({pairings_high:n}),r[this.props.r-1].pairings_high=n),localStorage.setItem("draws",JSON.stringify(r))}},{key:"render",value:function(){var e,t=this;return e=this.state.generated?r.a.createElement("div",null,r.a.createElement("h3",null,"Middle School"),r.a.createElement(F.a,{className:"table-no-top-margin draw-table-middle",hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Room"),r.a.createElement("th",{className:"draw-table-team-cell"},"Proposition"),r.a.createElement("th",{className:"draw-table-team-cell"},"Opposition"),r.a.createElement("th",null,"Judges"))),r.a.createElement("tbody",null,this.state.pairings_middle.map((function(e,a){return r.a.createElement($,{key:"middle-pair-".concat(a),pair:e,bracket:"middle",round:t.props.r,updatePairings:t.updatePairings})})))),r.a.createElement("h3",null,"High School"),r.a.createElement(F.a,{className:"table-no-top-margin",hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Room"),r.a.createElement("th",{className:"draw-table-team-cell"},"Proposition"),r.a.createElement("th",{className:"draw-table-team-cell"},"Opposition"),r.a.createElement("th",null,"Judges"))),r.a.createElement("tbody",null,this.state.pairings_high.map((function(e,t){return r.a.createElement($,{key:"high-pair-".concat(t),pair:e,bracket:"high"})}))))):r.a.createElement("div",null),r.a.createElement("div",null,r.a.createElement(g.a,{className:"draw-header"},r.a.createElement(f.a,null,r.a.createElement("h2",null,"Round ",this.props.r),r.a.createElement(O.a,{onClick:this.generateDraw,className:this.state.generated&&"hidden"},"Generate draw"),r.a.createElement(O.a,{variant:"secondary",onClick:this.generateDraw,className:!this.state.generated&&"hidden"},"Regenerate draw"))),r.a.createElement(g.a,null,r.a.createElement(f.a,{md:9,className:"table-col"},e)))}}]),t}(r.a.Component),X=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(b.a.Container,{id:"draw-view",defaultActiveKey:"round1"},r.a.createElement(g.a,null,r.a.createElement(f.a,{sm:2},r.a.createElement(C.a,{variant:"pills",className:"flex-column"},r.a.createElement(C.a.Item,null,r.a.createElement(C.a.Link,{eventKey:"round1",className:"sub-nav-link"},"Round 1")),r.a.createElement(C.a.Item,null,r.a.createElement(C.a.Link,{eventKey:"round2",className:"sub-nav-link"},"Round 2")),r.a.createElement(C.a.Item,null,r.a.createElement(C.a.Link,{eventKey:"round3",className:"sub-nav-link"},"Round 3")))),r.a.createElement(f.a,{sm:10},r.a.createElement(b.a.Content,null,r.a.createElement(b.a.Pane,{eventKey:"round1"},r.a.createElement(Q,{r:"1"})),r.a.createElement(b.a.Pane,{eventKey:"round2"},r.a.createElement(Q,{r:"2"})),r.a.createElement(b.a.Pane,{eventKey:"round3"},r.a.createElement(Q,{r:"3"}))))))}}]),t}(r.a.Component),Z=JSON.stringify,ee=function(e){function t(e){var a;return Object(o.a)(this,t),a=Object(c.a)(this,Object(m.a)(t).call(this,e)),localStorage.getItem("tournament_name")||localStorage.setItem("tournament_name",Z("New tournament")),localStorage.getItem("speakers_middle")||localStorage.setItem("speakers_middle",Z([])),localStorage.getItem("teams_middle")||localStorage.setItem("teams_middle",Z([])),localStorage.getItem("speakers_high")||localStorage.setItem("speakers_high",Z([])),localStorage.getItem("teams_high")||localStorage.setItem("teams_high",Z([])),localStorage.getItem("speakers_counter")||localStorage.setItem("speakers_counter",0),localStorage.getItem("teams_counter")||localStorage.setItem("teams_counter",0),localStorage.getItem("judges")||localStorage.setItem("judges",Z([])),localStorage.getItem("judges_counter")||localStorage.setItem("judges_counter",0),localStorage.getItem("draws_generated")||localStorage.setItem("draws_generated",Z([!1,!1,!1])),localStorage.getItem("draws")||localStorage.setItem("draws",Z([{pairings_middle:[],pairings_high:[]},{pairings_middle:[],pairings_high:[]},{pairings_middle:[],pairings_high:[]}])),document.title="".concat(JSON.parse(localStorage.getItem("tournament_name"))," - TacoTab"),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(h.a,{fluid:"true",className:"app"},r.a.createElement(g.a,null,r.a.createElement(f.a,{id:"app-container"},r.a.createElement("div",{id:"logo"},r.a.createElement("img",{src:p.a,alt:"TacoTab logo"}),r.a.createElement("h1",null,"TacoTab")),r.a.createElement(E.a,{defaultActiveKey:"home",id:"app-nav"},r.a.createElement(b.a,{eventKey:"home",className:"app-nav-tab",title:"Home"},r.a.createElement(_,null)),r.a.createElement(b.a,{eventKey:"middleschool",className:"app-nav-tab",title:"Middle School"},r.a.createElement(B,{bracket:"middle"})),r.a.createElement(b.a,{eventKey:"highschool",className:"app-nav-tab",title:"High School"},r.a.createElement(B,{bracket:"high"})),r.a.createElement(b.a,{eventKey:"judges",className:"app-nav-tab",title:"Judges"},r.a.createElement(V,null)),r.a.createElement(b.a,{eventKey:"draw",className:"app-nav-tab",title:"Draw"},r.a.createElement(X,null))))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(ee,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[55,1,2]]]);
//# sourceMappingURL=main.4086b0a2.chunk.js.map