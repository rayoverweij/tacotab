(this.webpackJsonptacotab=this.webpackJsonptacotab||[]).push([[0],{49:function(e,t,a){e.exports=a.p+"static/media/logo.15863a1a.svg"},67:function(e){e.exports=JSON.parse('{"name":"tacotab","version":"0.3.0","author":{"name":"Rayo Verweij","email":"rayo.verweij@live.nl","url":"https://rayo.dev"},"license":"MIT","description":"A tabbing app for small World Schools-like debating tournaments","private":true,"homepage":"https://rayo.dev/tacotab","dependencies":{"@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.5.0","@testing-library/user-event":"^7.2.1","@types/jest":"^24.9.1","@types/node":"^12.12.41","@types/react":"^16.9.35","@types/react-dom":"^16.9.8","bootstrap":"^4.5.0","bs-custom-file-input":"^1.3.4","gh-pages":"^2.2.0","node-sass":"^4.14.1","react":"^16.13.1","react-bootstrap":"^1.0.1","react-bootstrap-icons":"^1.0.2-alpha3","react-dom":"^16.13.1","react-scripts":"3.4.1","typescript":"^3.7.5"},"scripts":{"predeploy":"npm run build","deploy":"gh-pages -d build","start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},70:function(e,t,a){e.exports=a.p+"static/media/icon-github.026cb8cd.svg"},74:function(e,t,a){e.exports=a(92)},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(24),s=a.n(o),l=(a(79),a(80),a(16)),i=a(61),m=a(40),c=a(9),u=a(10),d=a(4),p=a(12),h=a(11),g=(a(81),a(49)),f=a.n(g),v=a(67),E=(a(82),a(19)),b=a(73),k=a(15),S=a(6),O=a(60),w=a(8),j=a(18),y=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={setupForm:{tournamentName:"",numDivisions:1,divisionOneName:"",divisionTwoName:""}},n.handleSetupFormChange=n.handleSetupFormChange.bind(Object(d.a)(n)),n.handleSetupFormSubmit=n.handleSetupFormSubmit.bind(Object(d.a)(n)),n.importData=n.importData.bind(Object(d.a)(n)),n}return Object(u.a)(a,[{key:"handleSetupFormChange",value:function(e){var t=e.target.name,a=e.target.value;"numDivisions"===t&&(a=Number(a));var n=Object(l.a)({},this.state.setupForm);n[t]=a,this.setState({setupForm:n})}},{key:"handleSetupFormSubmit",value:function(e){e.preventDefault();var t=this.state.setupForm.tournamentName;if(""===t)return!1;var a=this.state.setupForm.numDivisions,n=[this.state.setupForm.divisionOneName,this.state.setupForm.divisionTwoName];if(2===a&&(""===n[0]||""===n[1]))return!1;this.props.initializeTournament(t,a,n)}},{key:"importData",value:function(e){e.preventDefault();var t=document.getElementById("import-setup").files;if(null===t)return!1;this.props.importTournament(t)}},{key:"render",value:function(){return r.a.createElement(E.a,{show:!this.props.init,backdrop:"static",animation:!1,className:"setup-modal",dialogClassName:"setup-modal-dialog",backdropClassName:"setup-modal-backdrop","aria-labelledby":"setup-modal-title"},r.a.createElement(E.a.Header,null,r.a.createElement(E.a.Title,{id:"setup-modal-title"},r.a.createElement("img",{src:f.a,alt:"TacoTab logo",id:"setup-logo"}),"Welcome to TacoTab!")),r.a.createElement(E.a.Body,null,r.a.createElement("p",null,r.a.createElement("strong",null,"This is prerelease software, still under active development. Use at your own risk\u2014this app might bite.")," For more information, see the ",r.a.createElement("a",{href:"https://github.com/rayoverweij/tacotab",rel:"noopener noreferrer",target:"_blank"},"GitHub repository"),"."),r.a.createElement("p",null,"You can create a new tournament from scratch, or import data from a previous TacoTab tournament."),r.a.createElement(b.a,{defaultActiveKey:"createnew",id:"setup-tabs"},r.a.createElement(k.a,{eventKey:"createnew",title:"New tournament"},r.a.createElement(S.a,{onSubmit:this.handleSetupFormSubmit},r.a.createElement("h5",null,"Tournament name"),r.a.createElement(S.a.Group,{controlId:"setupFormTournamentName"},r.a.createElement(S.a.Control,{name:"tournamentName",type:"text",placeholder:"e.g. 'Bard MS-HS 2020'",value:this.state.setupForm.name,onChange:this.handleSetupFormChange})),r.a.createElement("h5",{id:"setup-form-div-h5"},"Speaker divisions"),r.a.createElement(S.a.Group,{controlId:"setupFormNumDivisions",id:"setup-form-num-div"},r.a.createElement(S.a.Label,null,"Number of speaker divisions:\xa0\xa0"),r.a.createElement(S.a.Check,{inline:!0,custom:!0,name:"numDivisions",label:"1",value:1,type:"radio",id:"setup-form-divisions-1",checked:1===this.state.setupForm.numDivisions,onChange:this.handleSetupFormChange}),r.a.createElement(S.a.Check,{inline:!0,custom:!0,name:"numDivisions",label:"2",value:2,type:"radio",id:"setup-form-divisions-2",checked:2===this.state.setupForm.numDivisions,onChange:this.handleSetupFormChange})),r.a.createElement(O.a,{in:2===this.state.setupForm.numDivisions},r.a.createElement("div",null,r.a.createElement(S.a.Group,{controlId:"setupFormDivisionNames"},r.a.createElement(S.a.Label,null,"Give both divisions a name for easy identification."),r.a.createElement(S.a.Row,null,r.a.createElement(w.a,{md:6},r.a.createElement(S.a.Control,{name:"divisionOneName",type:"text",placeholder:"e.g. 'Novice'",value:this.state.setupForm.divisionOneName,onChange:this.handleSetupFormChange})),r.a.createElement(w.a,{md:6},r.a.createElement(S.a.Control,{name:"divisionTwoName",type:"text",placeholder:"e.g. 'Open'",value:this.state.setupForm.divisionTwoName,onChange:this.handleSetupFormChange})))))),r.a.createElement(j.a,{variant:"primary",type:"submit",id:"setup-form-submit"},"Create the tournament"))),r.a.createElement(k.a,{eventKey:"importnew",title:"Import tournament"},r.a.createElement("p",null,"Open files generated with the Export function."),r.a.createElement(S.a,{onSubmit:this.importData},r.a.createElement(S.a.Row,null,r.a.createElement(w.a,{md:9},r.a.createElement("div",{className:"custom-file"},r.a.createElement(S.a.Control,{name:"import",id:"import-setup",className:"custom-file-input",type:"file"}),r.a.createElement("label",{className:"custom-file-label",htmlFor:"customFile"},"Choose file"))),r.a.createElement(w.a,{md:3},r.a.createElement(j.a,{variant:"primary",type:"submit"},"Import"))))))))}}]),a}(r.a.Component),N=a(17),T=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(N.a,null,r.a.createElement(w.a,null,r.a.createElement("h2",null,"Welcome!"),r.a.createElement("p",null,r.a.createElement("strong",null,"This is prerelease software, still under active development. Use at your own risk.")," For more information, see the ",r.a.createElement("a",{href:"https://github.com/rayoverweij/tacotab",rel:"noopener noreferrer",target:"_blank"},"GitHub repository"),".")))}}]),a}(r.a.Component),C=(a(86),a(70)),I=a.n(C),D=a(71),F=a.n(D),R=a(14),M=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={nameForm:n.props.tournamentName},n.handleNameFormChange=n.handleNameFormChange.bind(Object(d.a)(n)),n.handleNameFormSubmit=n.handleNameFormSubmit.bind(Object(d.a)(n)),n.importData=n.importData.bind(Object(d.a)(n)),n.exportData=n.exportData.bind(Object(d.a)(n)),n.clearData=n.clearData.bind(Object(d.a)(n)),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){F.a.init()}},{key:"handleNameFormChange",value:function(e){this.setState({nameForm:e.target.value})}},{key:"handleNameFormSubmit",value:function(e){e.preventDefault();var t=this.state.nameForm;this.props.updateTournamentName(t)}},{key:"importData",value:function(e){e.preventDefault();var t=document.getElementById("import-settings").files;if(null===t)return!1;this.props.importTournament(t)}},{key:"exportData",value:function(){var e="data:text/json;charset=utf-8,";e+=encodeURIComponent("{"),e+=encodeURIComponent('"init": '+localStorage.getItem("init")+","),e+=encodeURIComponent('"tournamentName": '+localStorage.getItem("tournamentName")+","),e+=encodeURIComponent('"config": '+localStorage.getItem("config")+","),e+=encodeURIComponent('"speakersOne": '+localStorage.getItem("speakersOne")+","),e+=encodeURIComponent('"teamsOne": '+localStorage.getItem("teamsOne")+","),e+=encodeURIComponent('"speakersTwo": '+localStorage.getItem("speakersTwo")+","),e+=encodeURIComponent('"teamsTwo": '+localStorage.getItem("teamsTwo")+","),e+=encodeURIComponent('"speakerCounter": '+localStorage.getItem("speakerCounter")+","),e+=encodeURIComponent('"teamCounter": '+localStorage.getItem("teamCounter")+","),e+=encodeURIComponent('"judges": '+localStorage.getItem("judges")+","),e+=encodeURIComponent('"judgeCounter": '+localStorage.getItem("judgeCounter")+","),e+=encodeURIComponent('"draws": '+localStorage.getItem("draws")),e+=encodeURIComponent("}");var t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download","tournament.json"),document.body.appendChild(t),t.click(),t.remove()}},{key:"clearData",value:function(){if(!window.confirm("Are you sure you want to delete all data?"))return!1;localStorage.clear(),window.location.reload()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(N.a,null,r.a.createElement(w.a,{lg:8},r.a.createElement("h2",null,"Settings"),r.a.createElement("p",null,"Manage your tournament."),r.a.createElement("section",null,r.a.createElement("h3",null,"Change tournament name"),r.a.createElement(S.a,{onSubmit:this.handleNameFormSubmit},r.a.createElement(S.a.Row,null,r.a.createElement(w.a,{sm:9,xl:6},r.a.createElement(S.a.Control,{name:"tournament-name",type:"text",placeholder:"New name",value:this.state.nameForm,onChange:this.handleNameFormChange})),r.a.createElement(w.a,null,r.a.createElement(j.a,{variant:"primary",type:"submit"},"Save"))))),r.a.createElement("section",null,r.a.createElement("h3",null,"Import tournament data"),r.a.createElement("p",null,"Open files generated with the Export function below. ",r.a.createElement("strong",null,"Note:")," this will override all current data!"),r.a.createElement(S.a,{onSubmit:this.importData},r.a.createElement(S.a.Row,null,r.a.createElement(w.a,{xs:9,xl:6},r.a.createElement("div",{className:"custom-file"},r.a.createElement(S.a.Control,{name:"import",id:"import-settings",className:"custom-file-input",type:"file"}),r.a.createElement("label",{className:"custom-file-label",htmlFor:"customFile"},"Choose file"))),r.a.createElement(w.a,null,r.a.createElement(j.a,{variant:"primary",type:"submit"},"Import"))))),r.a.createElement("section",null,r.a.createElement("h3",null,"Export tournament data"),r.a.createElement("p",null,"Save all tournament data to a file on your PC."),r.a.createElement(j.a,{variant:"primary",onClick:this.exportData},r.a.createElement(R.f,{className:"btn-icon"}),"Export data")),r.a.createElement("section",{id:"section-cleardata"},r.a.createElement("h3",null,"Clear tournament data"),r.a.createElement("p",null,"Warning: this will delete ",r.a.createElement("strong",null,"all")," entered data. Save your data using the Export function first."),r.a.createElement(j.a,{variant:"danger",onClick:this.clearData},r.a.createElement(R.n,{className:"btn-icon"}),"Clear data"))),r.a.createElement(w.a,{lg:4},r.a.createElement("section",{id:"section-about"},r.a.createElement("h3",null,"About"),r.a.createElement("p",null,"TacoTab \u03b2 version 0.3.0",r.a.createElement("br",null),r.a.createElement("img",{src:I.a,alt:"GitHub logo",id:"logo-github"}),"\xa0",r.a.createElement("a",{href:"https://github.com/rayoverweij/tacotab",rel:"noopener noreferrer",target:"_blank"},"GitHub")),r.a.createElement("p",null,"Built by ",r.a.createElement("a",{href:"https://rayo.dev",rel:"noopener noreferrer",target:"_blank"},"Rayo Verweij")," for the ",r.a.createElement("a",{href:"https://debate.bard.edu",rel:"noopener noreferrer",target:"_blank"},"Bard Debate Union"),"\u2014Bard's best sports team.")))))}}]),a}(r.a.Component),J=a(13),A=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(k.a.Container,{id:"home-view",defaultActiveKey:"welcome"},r.a.createElement(N.a,null,r.a.createElement(w.a,{md:3,lg:2},r.a.createElement(J.a,{variant:"pills"},r.a.createElement(J.a.Item,null,r.a.createElement(J.a.Link,{eventKey:"welcome",className:"sub-nav-link"},r.a.createElement(R.h,{className:"btn-icon"}),"Welcome")),r.a.createElement(J.a.Item,null,r.a.createElement(J.a.Link,{eventKey:"settings",className:"sub-nav-link"},r.a.createElement(R.g,{className:"btn-icon"}),"Settings")))),r.a.createElement(w.a,{md:9,lg:10},r.a.createElement(k.a.Content,null,r.a.createElement(k.a.Pane,{eventKey:"welcome"},r.a.createElement(T,null)),r.a.createElement(k.a.Pane,{eventKey:"settings"},r.a.createElement(M,{config:this.props.config,tournamentName:this.props.tournamentName,updateTournamentName:this.props.updateTournamentName,updateConfig:this.props.updateConfig,importTournament:this.props.importTournament}))))))}}]),a}(r.a.Component),x=a(35),P=(a(87),function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={name:n.props.speaker.name,disqualified:n.props.speaker.disqualified,trashFill:!1},n.handleSpeakerNameEdit=n.handleSpeakerNameEdit.bind(Object(d.a)(n)),n.handleSpeakerNameUpdate=n.handleSpeakerNameUpdate.bind(Object(d.a)(n)),n.handleDisqUpdate=n.handleDisqUpdate.bind(Object(d.a)(n)),n.trashOnMouseEnter=n.trashOnMouseEnter.bind(Object(d.a)(n)),n.trashOnMouseLeave=n.trashOnMouseLeave.bind(Object(d.a)(n)),n}return Object(u.a)(a,[{key:"handleSpeakerNameEdit",value:function(e){this.setState({name:e.target.value})}},{key:"handleSpeakerNameUpdate",value:function(e){e.preventDefault();var t=this.state.name,a=this.props.speaker;a.name=t,this.props.updateSpeaker(a)}},{key:"handleDisqUpdate",value:function(e){var t=e.target.checked,a=this.props.speaker;a.disqualified=t,this.setState({disqualified:t}),this.props.updateSpeaker(a)}},{key:"trashOnMouseEnter",value:function(){this.setState({trashFill:!0})}},{key:"trashOnMouseLeave",value:function(){this.setState({trashFill:!1})}},{key:"render",value:function(){var e=this,t=this.props.speaker;return r.a.createElement("tr",{key:"speaker-row-".concat(t.speakerID)},r.a.createElement("td",{className:"editable"},r.a.createElement("textarea",{className:"cell-valupdate",rows:1,cols:25,autoComplete:"off",spellCheck:"false",value:this.state.name,onChange:this.handleSpeakerNameEdit,onBlur:this.handleSpeakerNameUpdate})),r.a.createElement("td",null,t.school),r.a.createElement("td",{className:"cell-low-padding"},r.a.createElement(S.a.Check,{id:"speaker-disq-".concat(t.speakerID),type:"switch",name:"disqualified",label:"",onChange:this.handleDisqUpdate,checked:this.state.disqualified,className:this.state.disqualified?"on":"off"})),r.a.createElement("td",{className:"table-delete"},this.state.trashFill?r.a.createElement(R.n,{role:"button",className:"icon",onMouseEnter:this.trashOnMouseEnter,onMouseLeave:this.trashOnMouseLeave,onClick:function(){return e.props.deleteSpeaker(t)}}):r.a.createElement(R.m,{role:"button",className:"icon",onMouseEnter:this.trashOnMouseEnter,onMouseLeave:this.trashOnMouseLeave,onClick:function(){return e.props.deleteSpeaker(t)}})))}}]),a}(r.a.Component)),L=a(25),U=a(28),W=a(32),K=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={addSpeakerForm:{speakerName:"",school:""}},n.handleAddSpeakerFormChange=n.handleAddSpeakerFormChange.bind(Object(d.a)(n)),n.handleAddSpeakerFormSubmit=n.handleAddSpeakerFormSubmit.bind(Object(d.a)(n)),n.updateSpeaker=n.updateSpeaker.bind(Object(d.a)(n)),n.deleteSpeaker=n.deleteSpeaker.bind(Object(d.a)(n)),n}return Object(u.a)(a,[{key:"handleAddSpeakerFormChange",value:function(e){var t=e.target,a=t.name,n=t.value,r=Object(l.a)({},this.state.addSpeakerForm);r[a]=n,this.setState({addSpeakerForm:r})}},{key:"handleAddSpeakerFormSubmit",value:function(e){e.preventDefault();var t=this.props.speakers,a=JSON.parse(localStorage.getItem("speakerCounter")),n={speakerID:a++,name:this.state.addSpeakerForm.speakerName,school:this.state.addSpeakerForm.school,scores:[0,0,0],ranks:[0,0,0],wins:0,disqualified:!1};t.push(n),localStorage.setItem("speakerCounter",JSON.stringify(a)),this.props.updateSpeakers(t);var r=Object(l.a)({},this.state.addSpeakerForm);r.speakerName="",this.setState({addSpeakerForm:r})}},{key:"updateSpeaker",value:function(e){var t=this.props.speakers,a=t.indexOf(e);t[a]=e,this.props.updateSpeakers(t)}},{key:"deleteSpeaker",value:function(e){var t,a=Object(x.a)(this.props.teams);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(n.round1.includes(e.speakerID)||n.round2.includes(e.speakerID)||n.round3.includes(e.speakerID))return void window.alert("This speaker is still part of team ".concat(n.name,". You need to remove them from the team before you can delete them."))}}catch(s){a.e(s)}finally{a.f()}if(window.confirm("Are you sure you want to delete speaker ".concat(e.name,"?"))){var r=this.props.speakers,o=r.indexOf(e);r.splice(o,1),this.props.updateSpeakers(r)}}},{key:"render",value:function(){var e,t=this;return e=0===this.props.speakers.length?r.a.createElement("p",{className:"none-yet"},"No speakers yet!"):r.a.createElement(L.a,{className:"speaker-table",hover:!0,bordered:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"School"),r.a.createElement("th",null,r.a.createElement(U.a,{placement:"top",overlay:r.a.createElement(W.a,{id:"tooltip-disqualify-info"},"Disqualified speakers can still be added to teams and receive scores, but won't be listed in the ranking")},r.a.createElement("abbr",{title:""},"Disq"))),r.a.createElement("th",{className:"table-delete"},r.a.createElement(R.n,{className:"icon"})))),r.a.createElement("tbody",null,this.props.speakers.map((function(e){return r.a.createElement(P,{key:"speaker-row-".concat(e.speakerID),speaker:e,updateSpeaker:t.updateSpeaker,deleteSpeaker:t.deleteSpeaker})})))),r.a.createElement("div",null,r.a.createElement(N.a,null,r.a.createElement(w.a,null,r.a.createElement("h2",null,"Speakers"),r.a.createElement(S.a,{onSubmit:this.handleAddSpeakerFormSubmit},r.a.createElement(S.a.Row,null,r.a.createElement(w.a,{md:4},r.a.createElement(S.a.Control,{name:"name",type:"text",placeholder:"Name",value:this.state.addSpeakerForm.speakerName,onChange:this.handleAddSpeakerFormChange})),r.a.createElement(w.a,{md:4},r.a.createElement(S.a.Control,{name:"school",type:"text",placeholder:"School",value:this.state.addSpeakerForm.school,onChange:this.handleAddSpeakerFormChange})),r.a.createElement(w.a,null,r.a.createElement(j.a,{variant:"primary",className:"btn-submit",type:"submit"},"Add speaker")))))),r.a.createElement(N.a,null,r.a.createElement(w.a,{lg:10,xl:8,className:"table-col"},e)))}}]),a}(r.a.Component),H=(a(88),function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={value:"score"===n.props.type?n.props.speaker.scores[n.props.round].toString():n.props.speaker.ranks[n.props.round].toString()},n.handleEdit=n.handleEdit.bind(Object(d.a)(n)),n.handleUpdate=n.handleUpdate.bind(Object(d.a)(n)),n}return Object(u.a)(a,[{key:"handleEdit",value:function(e){this.setState({value:e.target.value})}},{key:"handleUpdate",value:function(e){e.preventDefault();var t=this.state.value;t&&!isNaN(Number(t))||(t="0"),this.props.fn(this.props.speaker,this.props.round,Number(t))}},{key:"render",value:function(){return r.a.createElement("textarea",{rows:1,cols:"score"===this.props.type?2:1,maxLength:"score"===this.props.type?2:1,autoComplete:"off",value:this.state.value,onChange:this.handleEdit,onBlur:this.handleUpdate})}}]),a}(r.a.Component)),_=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n,r;return Object(c.a)(this,a),r=1===(n=t.call(this,e)).props.round?"round1":2===n.props.round?"round2":"round3",n.state={value:n.props.team[r][n.props.speakerPos]},n.handleFormChange=n.handleFormChange.bind(Object(d.a)(n)),n}return Object(u.a)(a,[{key:"handleFormChange",value:function(e){var t=parseInt(e.target.value);this.setState({value:t}),this.props.handleUpdateTeamFormChange(t,this.props.speakerPos,this.props.round)}},{key:"render",value:function(){return r.a.createElement(w.a,null,r.a.createElement(S.a.Group,{controlId:"form-update-team-".concat(this.props.team.teamID,"-speaker-").concat(this.props.speakerPos,"-round-").concat(this.props.round)},r.a.createElement(S.a.Label,null,"Round ",this.props.round),r.a.createElement(S.a.Control,{as:"select",name:"speaker-".concat(this.props.speakerPos,"-round-").concat(this.props.round),value:this.state.value,onChange:this.handleFormChange},2===this.props.speakerPos?r.a.createElement("option",{value:-1},"[no third speaker]"):"",this.props.speakerPicker)))}}]),a}(r.a.Component),q=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={win:n.props.team.wins[n.props.round-1]},n.handleWinFormUpdate=n.handleWinFormUpdate.bind(Object(d.a)(n)),n}return Object(u.a)(a,[{key:"handleWinFormUpdate",value:function(e){var t=this.props.team;"true"===e.target.value?(t.wins[this.props.round-1]=!0,t.totalWins+=1,this.setState({win:!0})):(t.wins[this.props.round-1]=!1,t.totalWins-=1,this.setState({win:!1})),this.props.updateTeam(t)}},{key:"render",value:function(){return r.a.createElement(S.a,null,r.a.createElement(S.a.Control,{as:"select",name:"win-form-".concat(this.props.team.teamID,"-round-").concat(this.props.round),value:this.state.win.toString(),onChange:this.handleWinFormUpdate},r.a.createElement("option",{value:"true"},"Win"),r.a.createElement("option",{value:"false"},"Loss")))}}]),a}(r.a.Component),B=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={speakers:n.getDistinctSpeakers(),updateTeamForm:[[n.props.team.round1[0],n.props.team.round2[0],n.props.team.round3[0]],[n.props.team.round1[1],n.props.team.round2[1],n.props.team.round3[1]],[n.props.team.round1[2],n.props.team.round2[2],n.props.team.round3[2]]],showModal:!1,trashFill:!1,peopleFill:!1},n.setScore=n.setScore.bind(Object(d.a)(n)),n.setRank=n.setRank.bind(Object(d.a)(n)),n.modalShow=n.modalShow.bind(Object(d.a)(n)),n.modalHide=n.modalHide.bind(Object(d.a)(n)),n.handleUpdateTeamFormChange=n.handleUpdateTeamFormChange.bind(Object(d.a)(n)),n.handleTeamUpdate=n.handleTeamUpdate.bind(Object(d.a)(n)),n.trashOnMouseEnter=n.trashOnMouseEnter.bind(Object(d.a)(n)),n.trashOnMouseLeave=n.trashOnMouseLeave.bind(Object(d.a)(n)),n.peopleOnMouseEnter=n.peopleOnMouseEnter.bind(Object(d.a)(n)),n.peopleOnMouseLeave=n.peopleOnMouseLeave.bind(Object(d.a)(n)),n}return Object(u.a)(a,[{key:"getDistinctSpeakers",value:function(){for(var e=[],t=0;t<3;t++)e.push(this.props.team.round1[t]),e.push(this.props.team.round2[t]),e.push(this.props.team.round3[t]);return Object(i.a)(new Set(e))}},{key:"modalShow",value:function(){this.setState({showModal:!0})}},{key:"modalHide",value:function(){this.setState({showModal:!1})}},{key:"setScore",value:function(e,t,a){var n=this.props.speakers;n.find((function(t){return t.speakerID.toString()===e.speakerID.toString()})).scores[t]=a,this.props.updateSpeakers(n)}},{key:"setRank",value:function(e,t,a){var n=this.props.speakers;n.find((function(t){return t.speakerID.toString()===e.speakerID.toString()})).ranks[t]=a,this.props.updateSpeakers(n)}},{key:"handleUpdateTeamFormChange",value:function(e,t,a){var n=this.state.updateTeamForm;n[t][a-1]=e,this.setState({updateTeamForm:n})}},{key:"handleTeamUpdate",value:function(e){e.preventDefault();var t=this.props.team;t.round1=[this.state.updateTeamForm[0][0],this.state.updateTeamForm[1][0],this.state.updateTeamForm[2][0]],t.round2=[this.state.updateTeamForm[0][1],this.state.updateTeamForm[1][1],this.state.updateTeamForm[2][1]],t.round3=[this.state.updateTeamForm[0][2],this.state.updateTeamForm[1][2],this.state.updateTeamForm[2][2]],this.props.updateTeam(t),this.setState({speakers:this.getDistinctSpeakers()}),this.modalHide()}},{key:"trashOnMouseEnter",value:function(){this.setState({trashFill:!0})}},{key:"trashOnMouseLeave",value:function(){this.setState({trashFill:!1})}},{key:"peopleOnMouseEnter",value:function(){this.setState({peopleFill:!0})}},{key:"peopleOnMouseLeave",value:function(){this.setState({peopleFill:!1})}},{key:"render",value:function(){var e=this,t=this.props.team,a=this.state.speakers.map((function(t){return-1===t?null:e.props.speakers.find((function(e){return e.speakerID===t}))}));if(a.includes(null)){var n=a.indexOf(null);a[n]={speakerID:-1,name:"[averaged third speaker]",school:"",scores:[(a[0].scores[0]+a[1].scores[0])/2,(a[0].scores[1]+a[1].scores[1])/2,(a[0].scores[2]+a[1].scores[2])/2],ranks:[(a[0].ranks[0]+a[1].ranks[0])/2,(a[0].ranks[1]+a[1].ranks[1])/2,(a[0].ranks[2]+a[1].ranks[2])/2],wins:0,disqualified:!0}}var o=a.map((function(a){if(-1===(a=a).speakerID)return r.a.createElement("tr",{key:"".concat(t.teamID,"-average-third")});var n=e.props.team.round1.includes(a.speakerID),o=e.props.team.round2.includes(a.speakerID),s=e.props.team.round3.includes(a.speakerID),l=0;n&&(l+=a.scores[0]),o&&(l+=a.scores[1]),s&&(l+=a.scores[2]);var i=0;return n&&(i+=a.ranks[0]),o&&(i+=a.ranks[1]),s&&(i+=a.ranks[2]),r.a.createElement("tr",{key:"".concat(a.name,"_row")},r.a.createElement("td",null,a.name),[n,o,s].map((function(t,n){return["score","rank"].map((function(o){return r.a.createElement("td",{className:t?"editable":"disabled"},r.a.createElement(H,{key:"teamcell-".concat(a.speakerID,"-").concat(n,"-").concat(o),type:o,speaker:a,round:n,fn:"score"===o?e.setScore:e.setRank}))}))})),r.a.createElement("td",null,l),r.a.createElement("td",null,i))})),s=0;a.forEach((function(t){e.props.team.round1.includes(t.speakerID)&&(s+=t.scores[0])}));var l=0;a.forEach((function(t){e.props.team.round2.includes(t.speakerID)&&(l+=t.scores[1])}));var i=0;a.forEach((function(t){e.props.team.round3.includes(t.speakerID)&&(i+=t.scores[2])}));var m=0;a.forEach((function(t){e.props.team.round1.includes(t.speakerID)&&(m+=t.ranks[0])}));var c=0;a.forEach((function(t){e.props.team.round2.includes(t.speakerID)&&(c+=t.ranks[1])}));var u=0;a.forEach((function(t){e.props.team.round3.includes(t.speakerID)&&(u+=t.ranks[2])})),t.totalPoints=s+l+i;var d=this.props.teams,p=d.findIndex((function(e){return e.teamID===t.teamID}));d[p]=t,1===this.props.div?localStorage.setItem("teamsOne",JSON.stringify(d)):localStorage.setItem("teamsTwo",JSON.stringify(d));var h=[0,1,2].map((function(a){return r.a.createElement("div",{key:"teamSpeakerSelectRow-team-".concat(t.teamID,"-speaker-").concat(a),className:"form-update-team-speaker"},r.a.createElement("p",null,"Speaker ",a+1),r.a.createElement(S.a.Row,null,[1,2,3].map((function(n){return r.a.createElement(_,{key:"teamSpeakerSelect-team-".concat(t.teamID,"-speaker-").concat(n,"-round-").concat(n),team:t,speakerPos:a,round:n,value:e.state.updateTeamForm,handleUpdateTeamFormChange:e.handleUpdateTeamFormChange,speakerPicker:e.props.speakerPicker})}))))}));return r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{rowSpan:this.state.speakers.length+3,className:"cell-teamname"},t.name,r.a.createElement("br",null),this.state.peopleFill?r.a.createElement(R.k,{role:"button",className:"icon",onMouseEnter:this.peopleOnMouseEnter,onMouseLeave:this.peopleOnMouseLeave,onClick:this.modalShow}):r.a.createElement(R.j,{role:"button",className:"icon",onMouseEnter:this.peopleOnMouseEnter,onMouseLeave:this.peopleOnMouseLeave,onClick:this.modalShow}),this.state.trashFill?r.a.createElement(R.n,{role:"button",className:"icon",onMouseEnter:this.trashOnMouseEnter,onMouseLeave:this.trashOnMouseLeave,onClick:function(){return e.props.deleteTeam(t)}}):r.a.createElement(R.m,{role:"button",className:"icon",onMouseEnter:this.trashOnMouseEnter,onMouseLeave:this.trashOnMouseLeave,onClick:function(){return e.props.deleteTeam(t)}}))),o,r.a.createElement("tr",{className:"row-total"},r.a.createElement("td",null,"Team total"),r.a.createElement("td",null,s),r.a.createElement("td",null,m),r.a.createElement("td",null,l),r.a.createElement("td",null,c),r.a.createElement("td",null,i),r.a.createElement("td",null,u),r.a.createElement("td",null,s+l+i),r.a.createElement("td",null,m+c+u)),r.a.createElement("tr",{className:"row-wins"},r.a.createElement("td",null,"Team wins"),r.a.createElement("td",{colSpan:2},r.a.createElement(q,{team:this.props.team,round:1,updateTeam:this.props.updateTeam})),r.a.createElement("td",{colSpan:2},r.a.createElement(q,{team:this.props.team,round:2,updateTeam:this.props.updateTeam})),r.a.createElement("td",{colSpan:2},r.a.createElement(q,{team:this.props.team,round:3,updateTeam:this.props.updateTeam})),r.a.createElement("td",{colSpan:2,className:"cell-totalwins"},"Total wins: ",t.totalWins)),r.a.createElement(E.a,{show:this.state.showModal,size:"lg",onHide:this.modalHide},r.a.createElement(E.a.Header,{closeButton:!0},r.a.createElement(E.a.Title,null,"Specify team members per round")),r.a.createElement(E.a.Body,null,r.a.createElement(S.a,{onSubmit:this.handleTeamUpdate},h,r.a.createElement(j.a,{variant:"primary",className:"btn-submit",type:"submit"},"Save")))))}}]),a}(r.a.Component),G=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(L.a,{hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Team Name"),r.a.createElement("th",null,"Speakers"),r.a.createElement("th",null,"R1 Score"),r.a.createElement("th",null,"R1 Rank"),r.a.createElement("th",null,"R2 Score"),r.a.createElement("th",null,"R2 Rank"),r.a.createElement("th",null,"R3 Score"),r.a.createElement("th",null,"R3 Rank"),r.a.createElement("th",null,"Total Score"),r.a.createElement("th",null,"Total Rank"))),this.props.teams.map((function(t){return r.a.createElement(B,{key:"".concat(t.name,"-row"),team:t,div:e.props.div,speakers:e.props.speakers,teams:e.props.teams,updateSpeakers:e.props.updateSpeakers,updateTeam:e.props.updateTeam,deleteTeam:e.props.deleteTeam,speakerPicker:e.props.speakerPicker})})))}}]),a}(r.a.Component),Y=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={addTeamForm:{teamName:"",speaker1:0,speaker2:0,speaker3:0},showModal:!1},n.modalShow=n.modalShow.bind(Object(d.a)(n)),n.modalHide=n.modalHide.bind(Object(d.a)(n)),n.handleAddTeamFormChange=n.handleAddTeamFormChange.bind(Object(d.a)(n)),n.handleAddTeamFormSubmit=n.handleAddTeamFormSubmit.bind(Object(d.a)(n)),n.updateTeam=n.updateTeam.bind(Object(d.a)(n)),n.deleteTeam=n.deleteTeam.bind(Object(d.a)(n)),n}return Object(u.a)(a,[{key:"modalShow",value:function(){this.setState({showModal:!0})}},{key:"modalHide",value:function(){this.setState({showModal:!1})}},{key:"handleAddTeamFormChange",value:function(e){var t=e.target.name,a=e.target.value;"teamName"!==t&&(a=Number(a));var n=Object(l.a)({},this.state.addTeamForm);n[t]=a,this.setState({addTeamForm:n})}},{key:"handleAddTeamFormSubmit",value:function(e){e.preventDefault();var t=this.props.teams,a=JSON.parse(localStorage.getItem("teamCounter")),n=[this.state.addTeamForm.speaker1,this.state.addTeamForm.speaker2,this.state.addTeamForm.speaker3],r={teamID:a++,name:this.state.addTeamForm.teamName,round1:n,round2:n,round3:n,totalPoints:0,wins:[!1,!1,!1],totalWins:0,sideRound1:"",opponents:[]};t.push(r),localStorage.setItem("teamCounter",JSON.stringify(a)),this.props.updateTeams(t),this.modalHide()}},{key:"updateTeam",value:function(e){var t=this.props.teams,a=t.findIndex((function(t){return t.teamID===e.teamID}));t[a]=e,this.props.updateTeams(t)}},{key:"deleteTeam",value:function(e){var t=JSON.parse(localStorage.getItem("draws"));for(var a in t){var n=void 0;n=1===this.props.div?t[a].roomsOne:t[a].roomsTwo;var r,o=Object(x.a)(n);try{for(o.s();!(r=o.n()).done;){var s=r.value;if(s.prop===e.teamID||s.opp===e.teamID)return void alert("This team has already started the tournament. You can't delete it anymore. You can still replace its speakers.")}}catch(i){o.e(i)}finally{o.f()}}if(window.confirm("Are you sure you want to delete team ".concat(e.name,"?"))){var l=this.props.teams;l=l.filter((function(t){return t.teamID!==e.teamID})),this.props.updateTeams(l)}}},{key:"render",value:function(){var e,t=this.props.speakers.map((function(e){return r.a.createElement("option",{value:e.speakerID,key:"option-".concat(e.speakerID)},e.name)}));return e=0===this.props.teams.length?r.a.createElement("p",{className:"none-yet"},"No teams yet!"):r.a.createElement(G,{div:this.props.div,speakers:this.props.speakers,teams:this.props.teams,updateSpeakers:this.props.updateSpeakers,updateTeam:this.updateTeam,deleteTeam:this.deleteTeam,speakerPicker:t}),r.a.createElement("div",null,r.a.createElement(N.a,null,r.a.createElement(w.a,null,r.a.createElement("h2",null,"Teams"),r.a.createElement(j.a,{onClick:this.modalShow},"Add team"))),r.a.createElement(N.a,null,r.a.createElement(w.a,null,e)),r.a.createElement(E.a,{show:this.state.showModal,onHide:this.modalHide},r.a.createElement(E.a.Header,{closeButton:!0},r.a.createElement(E.a.Title,null,"Add a team")),r.a.createElement(E.a.Body,null,r.a.createElement(S.a,{onSubmit:this.handleAddTeamFormSubmit},r.a.createElement(S.a.Group,{controlId:"form-add-team-".concat(this.props.div,"-name")},r.a.createElement(S.a.Label,null,"Team name"),r.a.createElement(S.a.Control,{type:"text",name:"teamName",value:this.state.addTeamForm.teamName,onChange:this.handleAddTeamFormChange})),r.a.createElement(S.a.Group,{controlId:"form-add-team-".concat(this.props.div,"-speaker-1")},r.a.createElement(S.a.Label,null,"Speaker 1"),r.a.createElement(S.a.Control,{as:"select",name:"speaker1",value:this.state.addTeamForm.speaker1,onChange:this.handleAddTeamFormChange},r.a.createElement("option",null,"-- pick a speaker --"),t)),r.a.createElement(S.a.Group,{controlId:"form-add-team-".concat(this.props.div,"-speaker-2")},r.a.createElement(S.a.Label,null,"Speaker 2"),r.a.createElement(S.a.Control,{as:"select",name:"speaker2",value:this.state.addTeamForm.speaker2,onChange:this.handleAddTeamFormChange},r.a.createElement("option",null,"-- pick a speaker --"),t)),r.a.createElement(S.a.Group,{controlId:"form-add-team-".concat(this.props.div,"-speaker-3")},r.a.createElement(S.a.Label,null,"Speaker 3"),r.a.createElement(S.a.Control,{as:"select",name:"speaker3",value:this.state.addTeamForm.speaker3,onChange:this.handleAddTeamFormChange},r.a.createElement("option",null,"-- pick a speaker --"),r.a.createElement("option",{value:"avg"},"[no third speaker]"),t)),r.a.createElement(j.a,{variant:"primary",className:"btn-submit",type:"submit"},"Add")))))}}]),a}(r.a.Component),z=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.speakers,t=this.props.teams,a=e.slice(0).filter((function(e){return!1===e.disqualified})).sort((function(e,a){var n=e.scores.reduce((function(e,t){return e+t}),0),r=a.scores.reduce((function(e,t){return e+t}),0);if(n>r)return-1;if(n<r)return 1;var o=e.ranks.reduce((function(e,t){return e+t}),0),s=a.ranks.reduce((function(e,t){return e+t}),0);if(o<s)return-1;if(o>s)return 1;var l=t.find((function(t){return t.round1.includes(e.speakerID)})),i=t.find((function(e){return e.round1.includes(a.speakerID)})),m=void 0===l?0:l.totalWins,c=void 0===i?0:i.totalWins;if(m>c)return-1;if(m<c)return 1;var u=void 0===l?0:l.totalPoints,d=void 0===i?0:i.totalPoints;return u>d?-1:1})).map((function(e,a){var n=t.find((function(t){return t.round1.includes(e.speakerID)}));return void 0===n&&(n={teamID:-1,name:"",round1:[],round2:[],round3:[],totalPoints:0,wins:[],totalWins:0,sideRound1:"",opponents:[]}),r.a.createElement("tr",{key:"speaker_rank_".concat(a+1)},r.a.createElement("td",null,a+1),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.school),r.a.createElement("td",null,e.scores.reduce((function(e,t){return e+t}),0)),r.a.createElement("td",null,e.ranks.reduce((function(e,t){return e+t}),0)),r.a.createElement("td",null,n.totalWins),r.a.createElement("td",null,n.totalPoints))})),n=t.slice(0).sort((function(e,t){var a=e.totalWins,n=t.totalWins;if(a>n)return-1;if(a<n)return 1;var r=e.totalPoints,o=t.totalPoints;return r>o?-1:1})).map((function(e,t){return r.a.createElement("tr",{key:"team_rank_".concat(t+1)},r.a.createElement("td",null,t+1),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.totalWins),r.a.createElement("td",null,e.totalPoints))}));return r.a.createElement("div",null,r.a.createElement(N.a,null,r.a.createElement(w.a,null,r.a.createElement("h2",null,"Ranking"))),r.a.createElement(N.a,null,r.a.createElement(w.a,{lg:7,className:"table-col"},r.a.createElement("h3",null,"Speakers"),r.a.createElement(L.a,{striped:!0,className:"speaker-ranking-table table-no-top-margin table-less-bottom-margin-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"School"),r.a.createElement("th",null,r.a.createElement(U.a,{placement:"top",overlay:r.a.createElement(W.a,{id:"tooltip-totalspeakerpoints"},"Total speaker points")},r.a.createElement("abbr",{title:""},"\u03a3SP"))),r.a.createElement("th",null,r.a.createElement(U.a,{placement:"top",overlay:r.a.createElement(W.a,{id:"tooltip-totalspeakerranks"},"Total speaker ranks (lower is better)")},r.a.createElement("abbr",{title:""},"\u03a3SR"))),r.a.createElement("th",null,r.a.createElement(U.a,{placement:"top",overlay:r.a.createElement(W.a,{id:"tooltip-totalteamwins"},"Total team wins")},r.a.createElement("abbr",{title:""},"\u03a3TW"))),r.a.createElement("th",null,r.a.createElement(U.a,{placement:"top",overlay:r.a.createElement(W.a,{id:"tooltip-totalteampoints"},"Total team points")},r.a.createElement("abbr",{title:""},"\u03a3TP"))))),r.a.createElement("tbody",null,a))),r.a.createElement(w.a,{lg:5,className:"table-col table-col-margin-lg"},r.a.createElement("h3",null,"Teams"),r.a.createElement(L.a,{striped:!0,className:"table-no-top-margin"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,r.a.createElement(U.a,{placement:"top",overlay:r.a.createElement(W.a,{id:"tooltip-totalteamwins"},"Total team wins")},r.a.createElement("abbr",{title:""},"\u03a3TW"))),r.a.createElement("th",null,r.a.createElement(U.a,{placement:"top",overlay:r.a.createElement(W.a,{id:"tooltip-totalteampoints"},"Total team points")},r.a.createElement("abbr",{title:""},"\u03a3TP"))))),r.a.createElement("tbody",null,n)))))}}]),a}(r.a.Component),V=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(k.a.Container,{id:"part-view-".concat(this.props.div),defaultActiveKey:"speakers"},r.a.createElement(N.a,null,r.a.createElement(w.a,{md:3,lg:2},r.a.createElement(J.a,{variant:"pills"},r.a.createElement(J.a.Item,null,r.a.createElement(J.a.Link,{eventKey:"speakers",className:"sub-nav-link"},r.a.createElement(R.l,{className:"btn-icon"}),"Speakers")),r.a.createElement(J.a.Item,null,r.a.createElement(J.a.Link,{eventKey:"teams",className:"sub-nav-link"},r.a.createElement(R.k,{className:"btn-icon"}),"Teams")),r.a.createElement(J.a.Item,null,r.a.createElement(J.a.Link,{eventKey:"ranking",className:"sub-nav-link"},r.a.createElement(R.o,{className:"btn-icon"}),"Ranking")))),r.a.createElement(w.a,{md:9,lg:10},r.a.createElement(k.a.Content,null,r.a.createElement(k.a.Pane,{eventKey:"speakers"},r.a.createElement(K,{speakers:this.props.speakers,teams:this.props.teams,updateSpeakers:this.props.updateSpeakers})),r.a.createElement(k.a.Pane,{eventKey:"teams"},r.a.createElement(Y,{div:this.props.div,speakers:this.props.speakers,teams:this.props.teams,updateSpeakers:this.props.updateSpeakers,updateTeams:this.props.updateTeams})),r.a.createElement(k.a.Pane,{eventKey:"ranking"},r.a.createElement(z,{speakers:this.props.speakers,teams:this.props.teams}))))))}}]),a}(r.a.Component),$=(a(89),function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={name:n.props.judge.name,canChair:n.props.judge.canChair,atRound1:n.props.judge.atRound1,atRound2:n.props.judge.atRound2,atRound3:n.props.judge.atRound3,trashFill:!1},n.handleJudgeNameEdit=n.handleJudgeNameEdit.bind(Object(d.a)(n)),n.handleJudgeNameUpdate=n.handleJudgeNameUpdate.bind(Object(d.a)(n)),n.handleJudgeToggle=n.handleJudgeToggle.bind(Object(d.a)(n)),n.trashOnMouseEnter=n.trashOnMouseEnter.bind(Object(d.a)(n)),n.trashOnMouseLeave=n.trashOnMouseLeave.bind(Object(d.a)(n)),n}return Object(u.a)(a,[{key:"handleJudgeNameEdit",value:function(e){this.setState({name:e.target.value})}},{key:"handleJudgeNameUpdate",value:function(e){e.preventDefault();var t=this.state.name,a=this.props.judge;a.name=t,this.props.updateJudge(a)}},{key:"handleJudgeToggle",value:function(e){var t=e.target.name,a=e.target.checked,n=this.props.judge;n[t]=a,this.setState(Object(m.a)({},t,a)),this.props.updateJudge(n)}},{key:"trashOnMouseEnter",value:function(){this.setState({trashFill:!0})}},{key:"trashOnMouseLeave",value:function(){this.setState({trashFill:!1})}},{key:"render",value:function(){var e=this,t=this.props.judge;return r.a.createElement("tr",null,r.a.createElement("td",{className:"judge-table-name editable"},r.a.createElement("textarea",{className:"cell-valupdate",rows:1,cols:25,autoComplete:"off",spellCheck:"false",value:this.state.name,onChange:this.handleJudgeNameEdit,onBlur:this.handleJudgeNameUpdate})),r.a.createElement("td",{className:"judge-table-school"},t.school),r.a.createElement("td",{className:"judge-table-toggle cell-low-padding"},r.a.createElement(S.a.Check,{id:"judge-canchair-".concat(t.judgeID),type:"switch",name:"canChair",label:"",onChange:this.handleJudgeToggle,checked:this.state.canChair,className:this.state.canChair?"on":"off"})),r.a.createElement("td",{className:"judge-table-toggle cell-low-padding"},r.a.createElement(S.a.Check,{id:"judge-r1-".concat(t.judgeID),type:"switch",name:"atRound1",label:"",onChange:this.handleJudgeToggle,checked:this.state.atRound1,className:this.state.atRound1?"on":"off"})),r.a.createElement("td",{className:"judge-table-toggle cell-low-padding"},r.a.createElement(S.a.Check,{id:"judge-r2-".concat(t.judgeID),type:"switch",name:"atRound2",label:"",onChange:this.handleJudgeToggle,checked:this.state.atRound2,className:this.state.atRound2?"on":"off"})),r.a.createElement("td",{className:"judge-table-toggle cell-low-padding"},r.a.createElement(S.a.Check,{id:"judge-r3-".concat(t.judgeID),type:"switch",name:"atRound3",label:"",onChange:this.handleJudgeToggle,checked:this.state.atRound3,className:this.state.atRound3?"on":"off"})),r.a.createElement("td",{className:"table-delete"},this.state.trashFill?r.a.createElement(R.n,{role:"button",className:"icon",onMouseEnter:this.trashOnMouseEnter,onMouseLeave:this.trashOnMouseLeave,onClick:function(){return e.props.deleteJudge(t)}}):r.a.createElement(R.m,{role:"button",className:"icon",onMouseEnter:this.trashOnMouseEnter,onMouseLeave:this.trashOnMouseLeave,onClick:function(){return e.props.deleteJudge(t)}})))}}]),a}(r.a.Component)),Q=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={addJudgeForm:{judgeName:"",school:""}},n.handleAddJudgeFormChange=n.handleAddJudgeFormChange.bind(Object(d.a)(n)),n.handleAddJudgeFormSubmit=n.handleAddJudgeFormSubmit.bind(Object(d.a)(n)),n.updateJudge=n.updateJudge.bind(Object(d.a)(n)),n.deleteJudge=n.deleteJudge.bind(Object(d.a)(n)),n}return Object(u.a)(a,[{key:"handleAddJudgeFormChange",value:function(e){var t=e.target,a=t.name,n=t.value,r=Object(l.a)({},this.state.addJudgeForm);r[a]=n,this.setState({addJudgeForm:r})}},{key:"handleAddJudgeFormSubmit",value:function(e){e.preventDefault();var t=this.props.judges,a=JSON.parse(localStorage.getItem("judgeCounter")),n={judgeID:a++,name:this.state.addJudgeForm.judgeName,school:this.state.addJudgeForm.school,canChair:!1,atRound1:!0,atRound2:!0,atRound3:!0,hasChaired:[]};t.push(n),this.props.updateJudges(t),localStorage.setItem("judgeCounter",JSON.stringify(a));var r=Object(l.a)({},this.state.addJudgeForm);r.name="",this.setState({addJudgeForm:r})}},{key:"updateJudge",value:function(e){var t=this.props.judges,a=t.indexOf(e);t[a]=e,this.props.updateJudges(t)}},{key:"deleteJudge",value:function(e){var t,a=JSON.parse(localStorage.getItem("draws")),n=!1,r=Object(x.a)(a);try{for(r.s();!(t=r.n()).done;){var o,s=t.value,l=Object(x.a)(s.roomsOne);try{for(l.s();!(o=l.n()).done;){var i=o.value;(i.chair===e.judgeID||i.wings.includes(e.judgeID))&&(n=!0)}}catch(h){l.e(h)}finally{l.f()}var m,c=Object(x.a)(s.roomsTwo);try{for(c.s();!(m=c.n()).done;){var u=m.value;(u.chair===e.judgeID||u.wings.includes(e.judgeID))&&(n=!0)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){r.e(h)}finally{r.f()}if(n)return alert("This judge has already taken part in a round. You can't delete them anymore. You can still change their availability for each round."),!1;if(window.confirm("Are you sure you want to delete judge ".concat(e.name,"?"))){var d=this.props.judges,p=d.indexOf(e);d.splice(p,1),this.props.updateJudges(d)}}},{key:"render",value:function(){var e,t=this,a=this.props.judges;0!==this.props.judges.length&&(e=r.a.createElement(L.a,{className:"judge-table table-no-top-margin",hover:!0,bordered:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"judge-table-name"},"Name"),r.a.createElement("th",null,"School"),r.a.createElement("th",{className:"judge-table-toggle"},"Chair?"),r.a.createElement("th",{className:"judge-table-toggle"},"Round 1?"),r.a.createElement("th",{className:"judge-table-toggle"},"Round 2?"),r.a.createElement("th",{className:"judge-table-toggle"},"Round 3?"),r.a.createElement("th",{className:"table-delete"},r.a.createElement(R.n,{className:"icon"})))),r.a.createElement("tbody",null,this.props.judges.map((function(e){return r.a.createElement($,{key:"judge-row-".concat(e.name),judge:e,updateJudge:t.updateJudge,deleteJudge:t.deleteJudge})})))));var n=Math.round(this.props.getTotalTeams()/2),o=a.filter((function(e){return e.canChair&&e.atRound1})).length,s=a.filter((function(e){return e.canChair&&e.atRound2})).length,l=a.filter((function(e){return e.canChair&&e.atRound3})).length;return r.a.createElement(k.a.Container,{id:"judges-view",defaultActiveKey:"judges"},r.a.createElement(N.a,null,r.a.createElement(w.a,{md:3,lg:2},r.a.createElement(J.a,{variant:"pills",className:"no-show-sm"},r.a.createElement(J.a.Item,null,r.a.createElement(J.a.Link,{eventKey:"judges",className:"sub-nav-link"},r.a.createElement(R.c,{className:"btn-icon"}),"Judges")))),r.a.createElement(w.a,{md:9,lg:10},r.a.createElement(k.a.Content,null,r.a.createElement(k.a.Pane,{eventKey:"judges"},r.a.createElement(N.a,null,r.a.createElement(w.a,null,r.a.createElement("h2",null,"Judges"),r.a.createElement(S.a,{onSubmit:this.handleAddJudgeFormSubmit},r.a.createElement(S.a.Row,null,r.a.createElement(w.a,{md:4},r.a.createElement(S.a.Control,{name:"judgeName",type:"text",placeholder:"Name",value:this.state.addJudgeForm.judgeName,onChange:this.handleAddJudgeFormChange})),r.a.createElement(w.a,{md:4},r.a.createElement(S.a.Control,{name:"school",type:"text",placeholder:"School",value:this.state.addJudgeForm.school,onChange:this.handleAddJudgeFormChange})),r.a.createElement(w.a,null,r.a.createElement(j.a,{variant:"primary",className:"btn-submit",type:"submit"},"Add judge")))),r.a.createElement("div",{id:"total-judges"},r.a.createElement("p",null,"Total judges each round: ",this.props.judges.filter((function(e){return e.atRound1})).length," \xb7 ",this.props.judges.filter((function(e){return e.atRound2})).length," \xb7 ",this.props.judges.filter((function(e){return e.atRound3})).length,r.a.createElement("br",null),"Total chairs each round: ",o," \xb7 ",s," \xb7 ",l,r.a.createElement("br",null),r.a.createElement("span",{className:n>o||n>s||n>l?"red":""},"Total chairs needed: ",n))))),r.a.createElement(N.a,null,r.a.createElement(w.a,{lg:10,xl:9,className:"table-col"},e)))))))}}]),a}(r.a.Component),X=(a(90),a(91),a(64)),Z=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={roomName:n.props.room.name},n.handleRoomFormChange=n.handleRoomFormChange.bind(Object(d.a)(n)),n.handleRoomFormSubmit=n.handleRoomFormSubmit.bind(Object(d.a)(n)),n}return Object(u.a)(a,[{key:"handleRoomFormChange",value:function(e){this.setState({roomName:e.target.value})}},{key:"handleRoomFormSubmit",value:function(e){e.preventDefault(),this.props.updateRoom(this.props.room,this.props.judge.judgeID,this.props.isChair,this.state.roomName),document.body.click()}},{key:"render",value:function(){var e=this,t=r.a.createElement(X.a,{id:"judgepill-popover"},r.a.createElement(X.a.Title,{as:"h3"},"Switch rooms"),r.a.createElement(X.a.Content,null,this.props.draw.roomsOne.map((function(e){return e.name})).includes("")||this.props.draw.roomsTwo.map((function(e){return e.name})).includes("")?r.a.createElement("p",null,"You need to assign each round to a room before you can switch judges."):r.a.createElement(S.a,{onSubmit:this.handleRoomFormSubmit},this.props.draw.roomsOne.map((function(t,a){return r.a.createElement(S.a.Check,{custom:!0,key:"room-check-".concat(a),id:"room-check-".concat(Math.floor(1e6*Math.random())),name:"room",type:"radio",label:t.name,value:t.name,checked:e.state.roomName===t.name,onChange:e.handleRoomFormChange})})),this.props.draw.roomsTwo.map((function(t,a){return r.a.createElement(S.a.Check,{custom:!0,key:"room-check-".concat(a),id:"room-check-".concat(Math.floor(1e6*Math.random())),name:"room",type:"radio",label:t.name,value:t.name,checked:e.state.roomName===t.name,onChange:e.handleRoomFormChange})})),r.a.createElement(j.a,{className:"btn-popover",variant:"primary",type:"submit"},"Change"))));return r.a.createElement(U.a,{trigger:"click",placement:"right",overlay:t,rootClose:!0},r.a.createElement("div",{className:"judgepill ".concat(this.props.hasConflict?"red":"")},this.props.judge.name,this.props.isChair?"\xa9":""))}}]),a}(r.a.Component),ee=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={roomName:n.props.room.name},n.handleRoomChange=n.handleRoomChange.bind(Object(d.a)(n)),n.updateRoom=n.updateRoom.bind(Object(d.a)(n)),n}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(e){this.props.room.name!==e.room.name&&this.setState({roomName:this.props.room.name})}},{key:"handleRoomChange",value:function(e){var t=e.target.value,a=this.props.room;this.setState({roomName:t}),a.name=t,this.props.updateRooms(a,this.props.div)}},{key:"updateRoom",value:function(e,t,a,n){var r,o=this.props.draw,s=o.roomsOne.map((function(e){return e.name})).includes(n)?1:2,l=(r=1===s?o.roomsOne:o.roomsTwo).findIndex((function(e){return e.name===n}));if(a){var i=r[l].chair;if(i===t)return!1;if(!window.confirm("You are about to swap the chairs ".concat(this.props.judges.find((function(e){return e.judgeID===t})).name," and ").concat(this.props.judges.find((function(e){return e.judgeID===i})).name,". Do you wish to continue?")))return!1;r[l].chair=t,e.chair=i}else{r[l].wings.push(t);var m=e.wings.indexOf(t);e.wings.splice(m,1)}this.props.updateRooms(r[l],s),this.props.updateRooms(e,this.props.div)}},{key:"render",value:function(){var e=this,t=this.props.speakers,a=this.props.teams,n=this.props.judges,o=this.props.room,s=this.props.round,l=a.find((function(e){return e.teamID===o.prop})),i=a.find((function(e){return e.teamID===o.opp})),m=n.find((function(e){return e.judgeID===o.chair})),c=!1,u=[];1===s?(l.round1.forEach((function(e){return u.push(t.find((function(t){return t.speakerID===e})))})),i.round1.forEach((function(e){return u.push(t.find((function(t){return t.speakerID===e})))}))):2===s?(l.round2.forEach((function(e){return u.push(t.find((function(t){return t.speakerID===e})))})),i.round2.forEach((function(e){return u.push(t.find((function(t){return t.speakerID===e})))}))):(l.round3.forEach((function(e){return u.push(t.find((function(t){return t.speakerID===e})))})),i.round3.forEach((function(e){return u.push(t.find((function(t){return t.speakerID===e})))})));var d=[];u.filter((function(e){return void 0!==e})).forEach((function(e){return d.push(e.school)})),d.includes(m.school)&&(c=!0);var p=!1;return 2===s&&l.opponents[0]===i.teamID&&(p=!0),3===s&&(l.opponents[0]!==i.teamID&&l.opponents[1]!==i.teamID||(p=!0)),r.a.createElement("tr",null,r.a.createElement("td",{className:"editable draw-table-room-cell"},r.a.createElement("textarea",{className:"cell-valupdate",rows:1,cols:12,autoComplete:"off",placeholder:"room",value:this.state.roomName,onChange:this.handleRoomChange})),r.a.createElement("td",{className:"draw-table-team-cell"},r.a.createElement("span",{className:p?"orange":""},l.name)),r.a.createElement("td",{className:"draw-table-team-cell"},r.a.createElement("span",{className:p?"orange":""},i.name)),r.a.createElement("td",null,r.a.createElement("div",{className:"judgepill-container"},r.a.createElement(Z,{judge:m,isChair:!0,hasConflict:c,room:o,draw:this.props.draw,updateRoom:this.updateRoom})),0!==o.wings.length?",\xa0":"",o.wings.map((function(t,a){var s=n.find((function(e){return e.judgeID===t}));return r.a.createElement("div",{key:"judgepil-".concat(a),className:"judgepill-container"},r.a.createElement(Z,{judge:s,isChair:!1,hasConflict:d.includes(s.school),room:o,draw:e.props.draw,updateRoom:e.updateRoom}),a<o.wings.length-1?",\xa0":"")}))))}}]),a}(r.a.Component),te=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;Object(c.a)(this,a);var r=(n=t.call(this,e)).props.draws[n.props.round-1];return n.state={generated:r.generated,roomsOne:r.roomsOne,roomsTwo:r.roomsTwo,fullScreen:!1},n.generateDraw=n.generateDraw.bind(Object(d.a)(n)),n.updateRooms=n.updateRooms.bind(Object(d.a)(n)),n.fullScreenDraw=n.fullScreenDraw.bind(Object(d.a)(n)),n.modalHide=n.modalHide.bind(Object(d.a)(n)),n}return Object(u.a)(a,[{key:"generateDraw",value:function(){var e=this.props.round,t=this.props.draws;if(1===e){if(!0===t[1].generated||!0===t[2].generated)return alert("You can't regenerate a draw after you've generated the next one."),!1}else if(2===e){if(!0!==t[0].generated)return alert("You can't generate the draw for round 2 before generating the draw for round 1."),!1;if(!0===t[2].generated)return alert("You can't regenerate a draw after you've generated the next one."),!1}else if(3===e&&(!0!==t[0].generated||!0!==t[1].generated))return alert("You can't generate the draw for round 3 before generating the draws for rounds 1 and 2."),!1;if(this.state.generated&&!window.confirm("Do you really want to regenerate the draw?"))return!1;var a=this.props.teamsOne,n=this.props.teamsTwo,r=this.props.judges,o=a.length,s=n.length;if(0!==o){if(o%2!==0&&s%2!==0)return alert("Both divisions have an odd number of teams. A team from one division debating a team from the other division is not currently supported. Please add or remove a team to/from both in order to continue."),!1;if(o%2!==0)return alert("There is an odd number of ".concat(2===this.props.config.numDivisions?"".concat(this.props.config.divisionNames[0]," "):"","teams\u2014add or remove a team to generate the draw.")),!1;if(s%2!==0)return alert("There is an odd number of ".concat(2===this.props.config.numDivisions?"".concat(this.props.config.divisionNames[1]," "):"","teams\u2014add or remove a team to generate the draw.")),!1;var l=(r=1===e?r.filter((function(e){return!0===e.atRound1})):2===e?r.filter((function(e){return!0===e.atRound2})):r.filter((function(e){return!0===e.atRound3}))).filter((function(e){return!0===e.canChair})),i=r.filter((function(e){return!1===e.canChair})),m=o+s;if(l.length<m/2)return alert("There are not enough chairs to adjudicate every room. Please add some more."),!1;for(var c=l.length-1;c>0;c--){var u=Math.floor(Math.random()*(c+1)),d=[l[u],l[c]];l[c]=d[0],l[u]=d[1]}for(;l.length>m/2;)i.push(l.pop());var p,h,g=JSON.parse(localStorage.getItem("roomCounter")),f=[],v=[],E=a.slice(0),b=n.slice(0);if(1===e){for(var k=o-1;k>0;k--){var S=Math.floor(Math.random()*(k+1)),O=[E[S],E[k]];E[k]=O[0],E[S]=O[1]}for(var w=s-1;w>0;w--){var j=Math.floor(Math.random()*(w+1)),y=[b[j],b[w]];b[w]=y[0],b[j]=y[1]}}else E.sort((function(e,t){return e.totalWins<t.totalWins?1:e.totalWins>t.totalWins?-1:e.totalPoints<t.totalPoints?1:e.totalPoints>t.totalPoints?-1:1})),b.sort((function(e,t){return e.totalWins<t.totalWins?1:e.totalWins>t.totalWins?-1:e.totalPoints<t.totalPoints?1:e.totalPoints>t.totalPoints?-1:1}));2===e&&(E.forEach((function(e,t){if(t%2===0&&"prop"===e.sideRound1){for(var a=t+1;a<o;a++)if("opp"===E[a].sideRound1){var n=[E[a],E[t]];E[t]=n[0],E[a]=n[1];break}}else if(t%2===1&&"opp"===e.sideRound1)for(var r=t+1;r<o;r++)if("prop"===E[r].sideRound1){var s=[E[r],E[t]];E[t]=s[0],E[r]=s[1];break}})),b.forEach((function(e,t){if(t%2===0&&"prop"===e.sideRound1){for(var a=t+1;a<s;a++)if("opp"===b[a].sideRound1){var n=[b[a],b[t]];b[t]=n[0],b[a]=n[1];break}}else if(t%2===1&&"opp"===e.sideRound1)for(var r=t+1;r<s;r++)if("prop"===b[r].sideRound1){var o=[b[r],b[t]];b[t]=o[0],b[r]=o[1];break}})));for(var N=0;N<o;N+=2){1===e&&(E[N].sideRound1="prop",E[N+1].sideRound1="opp"),p=E[N].teamID,h=E[N+1].teamID,E[N].opponents[e-1]=h,E[N+1].opponents[e-1]=p;var T={roomID:g++,name:"",prop:p,opp:h,chair:l.pop().judgeID,wings:[]};f[N/2]=T}for(var C=0;C<s;C+=2){1===e&&(b[C].sideRound1="prop",b[C+1].sideRound1="opp"),p=b[C].teamID,h=b[C+1].teamID,b[C].opponents[e-1]=h,b[C+1].opponents[e-1]=p;var I={roomID:g++,name:"",prop:p,opp:h,chair:l.pop().judgeID,wings:[]};v[C/2]=I}for(;i.length>0;){for(var D=0;D<f.length&&(f[D].wings.push(i.pop().judgeID),0!==i.length);D++);if(0===i.length)break;for(var F=0;F<v.length&&(v[F].wings.push(i.pop().judgeID),0!==i.length);F++);}for(var R=f.length-1;R>0;R--){var M=Math.floor(Math.random()*(R+1)),J=[f[M],f[R]];f[R]=J[0],f[M]=J[1]}for(var A=v.length-1;A>0;A--){var x=Math.floor(Math.random()*(A+1)),P=[v[x],v[A]];v[A]=P[0],v[x]=P[1]}var L={generated:!0,roomsOne:f,roomsTwo:v};1===e?t[0]=L:2===e?t[1]=L:t[2]=L,localStorage.setItem("draws",JSON.stringify(t)),E.forEach((function(e){var t=a.indexOf(e);a[t]=e})),localStorage.setItem("teams_one",JSON.stringify(a)),b.forEach((function(e){var t=n.indexOf(e);n[t]=e})),localStorage.setItem("teams_two",JSON.stringify(n)),this.setState({roomsOne:f}),this.setState({roomsTwo:v}),this.setState({generated:!0}),localStorage.setItem("roomCounter",JSON.stringify(g))}else alert("Add some teams to generate the draw.")}},{key:"updateRooms",value:function(e,t){var a,n=JSON.parse(localStorage.getItem("draws")),r=(a=1===t?this.state.roomsOne:this.state.roomsTwo).indexOf(e);a[r]=e,1===t?(this.setState({roomsOne:a}),n[this.props.round-1].roomsOne=a):(this.setState({roomsTwo:a}),n[this.props.round-1].roomsTwo=a),localStorage.setItem("draws",JSON.stringify(n))}},{key:"fullScreenDraw",value:function(){this.setState({fullScreen:!0}),document.documentElement.requestFullscreen()}},{key:"modalHide",value:function(){this.setState({fullScreen:!1}),null!==document.fullscreenElement&&document.exitFullscreen()}},{key:"render",value:function(){var e,t=this;return e=this.state.generated?r.a.createElement("div",null,r.a.createElement("h3",null,2===this.props.config.numDivisions?this.props.config.divisionNames[0]:"Draw"),r.a.createElement(L.a,{className:"table-no-top-margin draw-table-one",hover:!0,striped:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Room"),r.a.createElement("th",{className:"draw-table-team-cell"},"Proposition"),r.a.createElement("th",{className:"draw-table-team-cell"},"Opposition"),r.a.createElement("th",null,"Judges"))),r.a.createElement("tbody",null,this.state.roomsOne.map((function(e,a){return r.a.createElement(ee,{key:"one-room-".concat(a),room:e,div:1,round:t.props.round,speakers:t.props.speakersOne,teams:t.props.teamsOne,judges:t.props.judges,draw:t.props.draws[t.props.round-1],updateRooms:t.updateRooms})})))),r.a.createElement("h3",null,2===this.props.config.numDivisions?this.props.config.divisionNames[1]:""),r.a.createElement(L.a,{className:"table-no-top-margin ".concat(1===this.props.config.numDivisions?"hidden":""),hover:!0,striped:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Room"),r.a.createElement("th",{className:"draw-table-team-cell"},"Proposition"),r.a.createElement("th",{className:"draw-table-team-cell"},"Opposition"),r.a.createElement("th",null,"Judges"))),r.a.createElement("tbody",null,this.state.roomsTwo.map((function(e,a){return r.a.createElement(ee,{key:"two-room-".concat(a),room:e,div:2,round:t.props.round,speakers:t.props.speakersTwo,teams:t.props.teamsTwo,judges:t.props.judges,draw:t.props.draws[t.props.round-1],updateRooms:t.updateRooms})}))))):r.a.createElement("div",{className:"draw-placeholder"}),r.a.createElement("div",null,r.a.createElement(N.a,{className:"draw-header"},r.a.createElement(w.a,null,r.a.createElement("h2",null,"Round ",this.props.round),r.a.createElement(j.a,{onClick:this.generateDraw,className:this.state.generated?"hidden":""},r.a.createElement(R.d,{className:"btn-icon"}),"Generate draw"),r.a.createElement(j.a,{variant:"secondary",onClick:this.generateDraw,className:this.state.generated?"":"hidden"},r.a.createElement(R.a,{className:"btn-icon"}),"Regenerate draw"),r.a.createElement(j.a,{variant:"primary",onClick:this.fullScreenDraw,className:this.state.generated?"":"hidden"},r.a.createElement(R.b,{className:"btn-icon"}),"Display fullscreen"))),r.a.createElement(N.a,null,r.a.createElement(w.a,{lg:10,xl:9,className:"table-col"},e)),r.a.createElement(E.a,{show:this.state.fullScreen,onHide:this.modalHide,backdrop:"static",size:"xl",className:"draw-modal",dialogClassName:"draw-modal-dialog",backdropClassName:"draw-modal-backdrop"},r.a.createElement(E.a.Header,{closeButton:!0},"Draw Round ",this.props.round),r.a.createElement(E.a.Body,null,e)))}}]),a}(r.a.Component),ae=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(k.a.Container,{id:"draw-view",defaultActiveKey:"round-1"},r.a.createElement(N.a,null,r.a.createElement(w.a,{md:3,lg:2},r.a.createElement(J.a,{variant:"pills"},[1,2,3].map((function(e){return r.a.createElement(J.a.Item,{key:"draw-nav-".concat(e)},r.a.createElement(J.a.Link,{eventKey:"round-".concat(e),className:"sub-nav-link"},r.a.createElement(R.e,{className:"btn-icon"}),"Round ",e))})))),r.a.createElement(w.a,{md:9,lg:10},r.a.createElement(k.a.Content,null,[1,2,3].map((function(t){return r.a.createElement(k.a.Pane,{key:"draw-pane-".concat(t),eventKey:"round-".concat(t)},r.a.createElement(te,{round:t,config:e.props.config,speakersOne:e.props.speakersOne,speakersTwo:e.props.speakersTwo,teamsOne:e.props.teamsOne,teamsTwo:e.props.teamsTwo,judges:e.props.judges,draws:e.props.draws}))}))))))}}]),a}(r.a.Component),ne=a(72),re=JSON.stringify,oe=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).updateStorage=function(e){return function(t){localStorage.setItem(e,JSON.stringify(t)),n.setState(Object(m.a)({},e,t))}},n.updateTournamentName=function(e){n.updateStorage("tournamentName")(e),document.title="".concat(e," - TacoTab")},n.updateInit=n.updateStorage("init"),n.updateConfig=n.updateStorage("config"),n.updateSpeakersOne=n.updateStorage("speakersOne"),n.updateSpeakersTwo=n.updateStorage("speakersTwo"),n.updateTeamsOne=n.updateStorage("teamsOne"),n.updateTeamsTwo=n.updateStorage("teamsTwo"),n.updateJudges=n.updateStorage("judges"),n.initializeTournament=function(e,t,a){n.updateTournamentName(e);var r={version:v.version,numDivisions:t};1!==t&&(r.divisionNames=Object(i.a)(a)),n.updateConfig(r),n.updateInit(!0)},n.importTournament=function(e){if(e.length<=0)return!1;var t=new FileReader;t.onload=function(e){var t=JSON.parse(e.target.result);if(localStorage.setItem("init",re(t.init)),t.config.version)localStorage.setItem("tournamentName",re(t.tournamentName)),localStorage.setItem("config",re(t.config)),localStorage.setItem("speakersOne",re(t.speakersOne)),localStorage.setItem("teamsOne",re(t.teamsOne)),localStorage.setItem("speakersTwo",re(t.speakersTwo)),localStorage.setItem("teamsTwo",re(t.teamsTwo)),localStorage.setItem("speakerCounter",re(t.speakerCounter)),localStorage.setItem("teamCounter",re(t.teamCounter)),localStorage.setItem("judges",re(t.judges)),localStorage.setItem("judgeCounter",re(t.judgeCounter)),localStorage.setItem("draws",re(t.draws)),localStorage.setItem("roomCounter",re(t.roomCounter));else{localStorage.setItem("tournamentName",re(t.tournament_name));var a=t.config;a.version=n.state.config.version,"1"===a.divisions?a.numDivisions=1:a.numDivisions=2,delete a.divisions,localStorage.setItem("config",re(a));var r=t.speakers_one.map((function(e){var t=Object(l.a)(Object(l.a)({},e),{},{speakerID:e.debaterID});return delete t.debaterID,t}));localStorage.setItem("speakersOne",re(r));var o=t.teams_one.map((function(e){var t=Object(l.a)(Object(l.a)({},e),{},{name:e.teamName,round1:e.round1.map((function(e){return parseInt(e)})),round2:e.round2.map((function(e){return parseInt(e)})),round3:e.round2.map((function(e){return parseInt(e)})),sideRound1:e.sideR1});return delete t.teamName,delete t.sideR1,t}));localStorage.setItem("teamsOne",re(o));var s=t.speakers_two.map((function(e){var t=Object(l.a)(Object(l.a)({},e),{},{speakerID:e.debaterID});return delete t.debaterID,t}));localStorage.setItem("speakersTwo",re(s));var i=t.teams_two.map((function(e){var t=Object(l.a)(Object(l.a)({},e),{},{name:e.teamName,round1:e.round1.map((function(e){return parseInt(e)})),round2:e.round2.map((function(e){return parseInt(e)})),round3:e.round2.map((function(e){return parseInt(e)})),sideRound1:e.sideR1});return delete t.teamName,delete t.sideR1,t}));localStorage.setItem("teamsTwo",re(i)),localStorage.setItem("speakerCounter",re(t.speakers_counter)),localStorage.setItem("teamCounter",re(t.teams_counter));var m=t.judges.map((function(e){var t=Object(l.a)(Object(l.a)({},e),{},{atRound1:e.r1,atRound2:e.r2,atRound3:e.r3});return delete t.r1,delete t.r2,delete t.r3,t}));localStorage.setItem("judges",re(m)),localStorage.setItem("judgeCounter",re(t.judges_counter));var c=0,u=t.draws.map((function(e){var t=Object(l.a)(Object(l.a)({},e),{},{roomsOne:e.pairings_one.map((function(e){var t=Object(l.a)(Object(l.a)({},e),{},{roomID:c++,name:e.room});return delete t.room,t})),roomsTwo:e.pairings_two.map((function(e){var t=Object(l.a)(Object(l.a)({},e),{},{roomID:c++,name:e.room});return delete t.room,t}))});return delete t.pairings_one,delete t.pairings_two,t}));localStorage.setItem("draws",re(u)),localStorage.setItem("roomCounter",re(c))}},t.readAsText(e.item(0)),window.location.reload()},localStorage.getItem("init")||localStorage.setItem("init",re(!1)),localStorage.getItem("tournamentName")||localStorage.setItem("tournamentName",re("New tournament")),localStorage.getItem("config")||localStorage.setItem("config",re({version:v.version,numDivisions:0})),localStorage.getItem("speakersOne")||localStorage.setItem("speakersOne",re([])),localStorage.getItem("teamsOne")||localStorage.setItem("teamsOne",re([])),localStorage.getItem("speakersTwo")||localStorage.setItem("speakersTwo",re([])),localStorage.getItem("teamsTwo")||localStorage.setItem("teamsTwo",re([])),localStorage.getItem("speakerCounter")||localStorage.setItem("speakerCounter",re(0)),localStorage.getItem("teamCounter")||localStorage.setItem("teamCounter",re(0)),localStorage.getItem("judges")||localStorage.setItem("judges",re([])),localStorage.getItem("judgeCounter")||localStorage.setItem("judgeCounter",re(0)),localStorage.getItem("draws")||localStorage.setItem("draws",re([{generated:!1,roomsOne:[],roomsTwo:[]},{generated:!1,roomsOne:[],roomsTwo:[]},{generated:!1,roomsOne:[],roomsTwo:[]}])),localStorage.getItem("roomCounter")||localStorage.setItem("roomCounter",re(0)),n.state={showMenu:!1,init:JSON.parse(localStorage.getItem("init")),tournamentName:JSON.parse(localStorage.getItem("tournamentName")),config:JSON.parse(localStorage.getItem("config")),speakersOne:JSON.parse(localStorage.getItem("speakersOne")),speakersTwo:JSON.parse(localStorage.getItem("speakersTwo")),teamsOne:JSON.parse(localStorage.getItem("teamsOne")),teamsTwo:JSON.parse(localStorage.getItem("teamsTwo")),judges:JSON.parse(localStorage.getItem("judges")),draws:JSON.parse(localStorage.getItem("draws"))},n.toggleMenu=n.toggleMenu.bind(Object(d.a)(n)),n.updateStorage=n.updateStorage.bind(Object(d.a)(n)),n.updateTournamentName=n.updateTournamentName.bind(Object(d.a)(n)),n.updateInit=n.updateInit.bind(Object(d.a)(n)),n.updateConfig=n.updateConfig.bind(Object(d.a)(n)),n.updateSpeakersOne=n.updateSpeakersOne.bind(Object(d.a)(n)),n.updateSpeakersTwo=n.updateSpeakersTwo.bind(Object(d.a)(n)),n.updateTeamsOne=n.updateTeamsOne.bind(Object(d.a)(n)),n.updateTeamsTwo=n.updateTeamsTwo.bind(Object(d.a)(n)),n.updateJudges=n.updateJudges.bind(Object(d.a)(n)),n.initializeTournament=n.initializeTournament.bind(Object(d.a)(n)),n.importTournament=n.importTournament.bind(Object(d.a)(n)),n.getTotalTeams=n.getTotalTeams.bind(Object(d.a)(n)),document.title="".concat(JSON.parse(localStorage.getItem("tournamentName"))," - TacoTab"),n}return Object(u.a)(a,[{key:"toggleMenu",value:function(){this.state.showMenu?this.setState({showMenu:!1}):this.setState({showMenu:!0})}},{key:"getTotalTeams",value:function(){return this.state.teamsOne.length+this.state.teamsTwo.length}},{key:"render",value:function(){var e,t;return 2!==this.state.config.numDivisions?(e=r.a.createElement(J.a.Item,null,r.a.createElement(J.a.Link,{eventKey:"participants"},"Participants")),t=r.a.createElement(k.a.Pane,{eventKey:"participants"},r.a.createElement(V,{div:1,speakers:this.state.speakersOne,teams:this.state.teamsOne,updateSpeakers:this.updateSpeakersOne,updateTeams:this.updateTeamsOne}))):(e=r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a.Item,null,r.a.createElement(J.a.Link,{eventKey:"divone"},this.state.config.divisionNames[0])),r.a.createElement(J.a.Item,null,r.a.createElement(J.a.Link,{eventKey:"divtwo"},this.state.config.divisionNames[1]))),t=r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a.Pane,{eventKey:"divone"},r.a.createElement(V,{div:1,speakers:this.state.speakersOne,teams:this.state.teamsOne,updateSpeakers:this.updateSpeakersOne,updateTeams:this.updateTeamsOne})),r.a.createElement(k.a.Pane,{eventKey:"divtwo"},r.a.createElement(V,{div:2,speakers:this.state.speakersTwo,teams:this.state.teamsTwo,updateSpeakers:this.updateSpeakersTwo,updateTeams:this.updateTeamsTwo})))),r.a.createElement(r.a.Fragment,null,r.a.createElement(ne.a,{fluid:!0,className:"app"},r.a.createElement("div",{id:"logo"},r.a.createElement("img",{src:f.a,alt:"TacoTab logo"}),r.a.createElement("h1",null,"TacoTab")),r.a.createElement("div",{id:"hamburger"},r.a.createElement(R.i,{onClick:this.toggleMenu,role:"button","aria-controls":"app-nav","aria-expanded":this.state.showMenu})),r.a.createElement(k.a.Container,{id:"app-nav",defaultActiveKey:"home"},r.a.createElement(O.a,{in:this.state.showMenu},r.a.createElement(J.a,{className:"main-nav"},r.a.createElement(J.a.Item,null,r.a.createElement(J.a.Link,{eventKey:"home"},"Home")),e,r.a.createElement(J.a.Item,null,r.a.createElement(J.a.Link,{eventKey:"judges"},"Judges")),r.a.createElement(J.a.Item,null,r.a.createElement(J.a.Link,{eventKey:"draw"},"Draw")))),r.a.createElement(k.a.Content,null,r.a.createElement(k.a.Pane,{eventKey:"home"},r.a.createElement(A,{tournamentName:this.state.tournamentName,config:this.state.config,updateTournamentName:this.updateTournamentName,updateConfig:this.updateConfig,importTournament:this.importTournament})),t,r.a.createElement(k.a.Pane,{eventKey:"judges"},r.a.createElement(Q,{judges:this.state.judges,updateJudges:this.updateJudges,getTotalTeams:this.getTotalTeams})),r.a.createElement(k.a.Pane,{eventKey:"draw"},r.a.createElement(ae,{config:this.state.config,speakersOne:this.state.speakersOne,speakersTwo:this.state.speakersTwo,teamsOne:this.state.teamsOne,teamsTwo:this.state.teamsTwo,judges:this.state.judges,draws:this.state.draws}))))),r.a.createElement(y,{init:this.state.init,initializeTournament:this.initializeTournament,importTournament:this.importTournament}))}}]),a}(r.a.Component),se=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function le(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(oe,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/tacotab",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/tacotab","/service-worker.js");se?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):le(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):le(t,e)}))}}()}},[[74,1,2]]]);
//# sourceMappingURL=main.e76a10af.chunk.js.map